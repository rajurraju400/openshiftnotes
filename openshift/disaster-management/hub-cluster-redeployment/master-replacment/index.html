
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for OpenShift installation, backup, storage, troubleshooting, and more.">
      
      
        <meta name="author" content="venkatapathirajr">
      
      
      
        <link rel="prev" href="../../infra-manager-redeployment/">
      
      
        <link rel="next" href="../../../../MACD-Operations/MACD-management/scope/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Hub Cluster Master-replacement - OpenShift Notes</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Red+Hat+Text:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Red Hat Text";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/redhat-style.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hub-cluster-master-replacement" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="OpenShift Notes" class="md-header__button md-logo" aria-label="OpenShift Notes" data-md-component="logo">
      
  <img src="../../../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenShift Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hub Cluster Master-replacement
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="OpenShift Notes" class="md-nav__button md-logo" aria-label="OpenShift Notes" data-md-component="logo">
      
  <img src="../../../../images/logo.png" alt="logo">

    </a>
    OpenShift Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Git Helper
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Git Helper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../git-helper/ncd-git-backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../git-helper/ncd-git-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Restore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment Scripts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Deployment Scripts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../git-helper/Deployment/backupconfig.sh" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../git-helper/Deployment/newgitserver.sh" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    New Git Server (v1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../git-helper/Deployment/git-server-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GIT deployment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OpenShift
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            OpenShift
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Project Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../projectmanagement/scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scope of work
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../deployment/automation/nokia-site-config-fixes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nokia Automation Tool
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            User Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usermanagement/remove-kubeadmin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remove Kubeadmin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usermanagement/user-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Backup & Restore
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Backup & Restore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup-restore/ACM-GEO-RED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACM GEO Red
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup-restore/ACM-localbackup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACM Local Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup-restore/AWS-S3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS S3 Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup-restore/etcd-backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETCD Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../backup-restore/etcd-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETCD Restore
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Intergrations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Intergrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Intergration/syslog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clusterlogging
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Maintenance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Maintenance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintenace/cluster-stop-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cluster Stop/Start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintenace/reboot-nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reboot Nodes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintenace/openshift_scalein_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NMC/NWC Scale-In Nodes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../maintenace/openshift_scaleout_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NMC/NWC Scale-Out Nodes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Networking
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Networking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/metalb-troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MetalLB Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../networking/metallb-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MetalLB Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Storage Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../storagemanagement/ceph-rebalanceissue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ceph Rebalance Issue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../storagemanagement/storage-node-replacement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage Node Replacement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../storagemanagement/one-OSD-not-created/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ceph OSD recreate
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/nsenter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nsenter Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/ncomsa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NCOM Caas Issue
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" checked>
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Disaster Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            Disaster Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infra-manager-redeployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Infra-Manager node reinstallation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Hub Cluster Master-replacement
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Hub Cluster Master-replacement
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#customer-details" class="md-nav__link">
    <span class="md-ellipsis">
      Customer Details
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#duration" class="md-nav__link">
    <span class="md-ellipsis">
      Duration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#impact" class="md-nav__link">
    <span class="md-ellipsis">
      Impact
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#highlevel-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Highlevel Steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-the-failed-node-from-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the failed node from the cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Removing the failed node from the cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#etcd-backup-for-master-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      ETCD backup for master nodes.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-the-failed-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Identifying the failed control plane node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-the-node-from-the-etcd-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the node from the etcd cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch-the-output-of-the-failed-nodes-machine-cr" class="md-nav__link">
    <span class="md-ellipsis">
      Fetch the output of the failed node’s machine CR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-failed-nodes-osds-from-odf" class="md-nav__link">
    <span class="md-ellipsis">
      Removing failed node’s OSDs from ODF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-the-node-from-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the node from the cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-back-the-node-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Adding back the node control plane node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding back the node control plane node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-bmh-and-machine-crs" class="md-nav__link">
    <span class="md-ellipsis">
      Create BMH and Machine CRs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-etcd" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying etcd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-back-the-osds" class="md-nav__link">
    <span class="md-ellipsis">
      Adding back the OSDs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MACD Operations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            MACD Operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MACD Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            MACD Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/MACD-management/scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scope of work
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CNF Onboarding Support
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            CNF Onboarding Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/image-tls-issue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image TLS Issue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/oclogin-tls-issue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OCLogin TLS Issue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/proxy-cache-pod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxy Cache Pod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/rolebinding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role Allocation for CNF user
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/Failtoconfigure_nncp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Failed to configure or Degraded
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/kubeconfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubeconfig overlapping
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/NCP-default-usersandrole/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NCP Standard user and role Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/ts-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cluster Wide TS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/istio-for-cnf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Istio for CNF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/restrict-project-creation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Removing Self-Provisioner Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/configure_openshift_tenable/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nessus Security Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/createlabelpostinstall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating labels post installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/Static-route/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OCP route ingress and egress
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-support/ocp_rbac_option1_with_sync/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LDAP Intergration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CNF Onboarding Prerequisites
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            CNF Onboarding Prerequisites
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-prerequisites/NCOM.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NCOM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-prerequisites/NCD.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NCD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-prerequisites/NCC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NCC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../MACD-Operations/CNF-onboarding-prerequisites/CMG.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CMG
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#customer-details" class="md-nav__link">
    <span class="md-ellipsis">
      Customer Details
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#duration" class="md-nav__link">
    <span class="md-ellipsis">
      Duration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#impact" class="md-nav__link">
    <span class="md-ellipsis">
      Impact
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#highlevel-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Highlevel Steps
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-the-failed-node-from-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the failed node from the cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Removing the failed node from the cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#etcd-backup-for-master-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      ETCD backup for master nodes.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#identifying-the-failed-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Identifying the failed control plane node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-the-node-from-the-etcd-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the node from the etcd cluster
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch-the-output-of-the-failed-nodes-machine-cr" class="md-nav__link">
    <span class="md-ellipsis">
      Fetch the output of the failed node’s machine CR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-failed-nodes-osds-from-odf" class="md-nav__link">
    <span class="md-ellipsis">
      Removing failed node’s OSDs from ODF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-the-node-from-the-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Removing the node from the cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-back-the-node-control-plane-node" class="md-nav__link">
    <span class="md-ellipsis">
      Adding back the node control plane node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding back the node control plane node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-bmh-and-machine-crs" class="md-nav__link">
    <span class="md-ellipsis">
      Create BMH and Machine CRs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-etcd" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying etcd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-back-the-osds" class="md-nav__link">
    <span class="md-ellipsis">
      Adding back the OSDs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="hub-cluster-master-replacement">Hub Cluster - Master Replacement<a class="headerlink" href="#hub-cluster-master-replacement" title="Permanent link">&para;</a></h1>
<blockquote>
<p>Here is the steps to do the master replacement on the hub cluster.  Dont use this steps for NMC/NWC.  </p>
</blockquote>
<h2 id="customer-details">Customer Details<a class="headerlink" href="#customer-details" title="Permanent link">&para;</a></h2>
<p>1) This mop is created for oneweb cluster and since nokia automation tool populated incorrect <code>/prefix</code> for master node. </p>
<p>2) for Oneweb london site, hub cluster having two nodes with incorrect <code>/prefix</code> problem.</p>
<h2 id="duration">Duration<a class="headerlink" href="#duration" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#duration">It will take 4 hours per node + 1 hour buffer. totall 10 hours for two servers.</a></li>
</ul>
<h2 id="impact">Impact<a class="headerlink" href="#impact" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#impact">CWL cluster LCM operation should not be performed</a></li>
<li><a href="#impact">CNF installed on the CWL cluster remains undistrubed, because hub quay will be time to time unaccess. So application onboarding process may make hub quay to be stressed.</a></li>
</ul>
<h2 id="highlevel-steps">Highlevel Steps<a class="headerlink" href="#highlevel-steps" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#removing-the-failed-node-from-the-cluster">Removing the failed node from the cluster</a></li>
<li><a href="#adding-back-the-node-control-plane-node">Adding back the node control plane node</a></li>
</ul>
<h2 id="removing-the-failed-node-from-the-cluster">Removing the failed node from the cluster<a class="headerlink" href="#removing-the-failed-node-from-the-cluster" title="Permanent link">&para;</a></h2>
<h3 id="etcd-backup-for-master-nodes">ETCD backup for master nodes.<a class="headerlink" href="#etcd-backup-for-master-nodes" title="Permanent link">&para;</a></h3>
<p>1) Start a debug session for a control plane node:</p>
<div class="codehilite"><pre><span></span><code>oc debug node/&lt;node_name&gt;
</code></pre></div>

<p>2) Change your root directory to /host:</p>
<div class="codehilite"><pre><span></span><code>chroot /host
</code></pre></div>

<p>3) If the cluster-wide proxy is enabled, be sure that you have exported the NO_PROXY, HTTP_PROXY, and HTTPS_PROXY environment variables. (optional)</p>
<p>4) Run the cluster-backup.sh script and pass in the location to save the backup to.</p>
<div class="codehilite"><pre><span></span><code>sh-4.4# /usr/local/bin/cluster-backup.sh /home/core/assets/backup
</code></pre></div>

<p><code>Example script output</code></p>
<div class="codehilite"><pre><span></span><code><span class="n">found</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">apiserver</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kubernetes</span><span class="o">/</span><span class="k">static</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">resources</span><span class="o">/</span><span class="n">kube</span><span class="o">-</span><span class="n">apiserver</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="mi">6</span>
<span class="n">found</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kubernetes</span><span class="o">/</span><span class="k">static</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">resources</span><span class="o">/</span><span class="n">kube</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="mi">7</span>
<span class="n">found</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kubernetes</span><span class="o">/</span><span class="k">static</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">resources</span><span class="o">/</span><span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="mi">6</span>
<span class="n">found</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">etcd</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">kubernetes</span><span class="o">/</span><span class="k">static</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="n">resources</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">pod</span><span class="o">-</span><span class="mi">3</span>
<span class="n">ede95fe6b88b87ba86a03c15e669fb4aa5bf0991c180d3c6895ce72eaade54a1</span>
<span class="n">etcdctl</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">3.4</span><span class="o">.</span><span class="mi">14</span>
<span class="n">API</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">3.4</span>
<span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;info&quot;</span><span class="p">,</span><span class="s2">&quot;ts&quot;</span><span class="p">:</span><span class="mf">1624647639.0188997</span><span class="p">,</span><span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;snapshot/v3_snapshot.go:119&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="p">:</span><span class="s2">&quot;created temporary db file&quot;</span><span class="p">,</span><span class="s2">&quot;path&quot;</span><span class="p">:</span><span class="s2">&quot;/home/core/assets/backup/snapshot_2021-06-25_190035.db.part&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;info&quot;</span><span class="p">,</span><span class="s2">&quot;ts&quot;</span><span class="p">:</span><span class="s2">&quot;2021-06-25T19:00:39.030Z&quot;</span><span class="p">,</span><span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;clientv3/maintenance.go:200&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="p">:</span><span class="s2">&quot;opened snapshot stream; downloading&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;info&quot;</span><span class="p">,</span><span class="s2">&quot;ts&quot;</span><span class="p">:</span><span class="mf">1624647639.0301006</span><span class="p">,</span><span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;snapshot/v3_snapshot.go:127&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="p">:</span><span class="s2">&quot;fetching snapshot&quot;</span><span class="p">,</span><span class="s2">&quot;endpoint&quot;</span><span class="p">:</span><span class="s2">&quot;https://10.0.0.5:2379&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;info&quot;</span><span class="p">,</span><span class="s2">&quot;ts&quot;</span><span class="p">:</span><span class="s2">&quot;2021-06-25T19:00:40.215Z&quot;</span><span class="p">,</span><span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;clientv3/maintenance.go:208&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="p">:</span><span class="s2">&quot;completed snapshot read; closing&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;info&quot;</span><span class="p">,</span><span class="s2">&quot;ts&quot;</span><span class="p">:</span><span class="mf">1624647640.6032252</span><span class="p">,</span><span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;snapshot/v3_snapshot.go:142&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="p">:</span><span class="s2">&quot;fetched snapshot&quot;</span><span class="p">,</span><span class="s2">&quot;endpoint&quot;</span><span class="p">:</span><span class="s2">&quot;https://10.0.0.5:2379&quot;</span><span class="p">,</span><span class="s2">&quot;size&quot;</span><span class="p">:</span><span class="s2">&quot;114 MB&quot;</span><span class="p">,</span><span class="s2">&quot;took&quot;</span><span class="p">:</span><span class="mf">1.584090459</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;level&quot;</span><span class="p">:</span><span class="s2">&quot;info&quot;</span><span class="p">,</span><span class="s2">&quot;ts&quot;</span><span class="p">:</span><span class="mf">1624647640.6047094</span><span class="p">,</span><span class="s2">&quot;caller&quot;</span><span class="p">:</span><span class="s2">&quot;snapshot/v3_snapshot.go:152&quot;</span><span class="p">,</span><span class="s2">&quot;msg&quot;</span><span class="p">:</span><span class="s2">&quot;saved&quot;</span><span class="p">,</span><span class="s2">&quot;path&quot;</span><span class="p">:</span><span class="s2">&quot;/home/core/assets/backup/snapshot_2021-06-25_190035.db&quot;</span><span class="p">}</span>
<span class="n">Snapshot</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">assets</span><span class="o">/</span><span class="n">backup</span><span class="o">/</span><span class="n">snapshot_2021</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">25</span><span class="n">_190035</span><span class="o">.</span><span class="n">db</span>
<span class="p">{</span><span class="s2">&quot;hash&quot;</span><span class="p">:</span><span class="mi">3866667823</span><span class="p">,</span><span class="s2">&quot;revision&quot;</span><span class="p">:</span><span class="mi">31407</span><span class="p">,</span><span class="s2">&quot;totalKey&quot;</span><span class="p">:</span><span class="mi">12828</span><span class="p">,</span><span class="s2">&quot;totalSize&quot;</span><span class="p">:</span><span class="mi">114446336</span><span class="p">}</span>
<span class="n">snapshot</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">kube</span><span class="w"> </span><span class="n">resources</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">assets</span><span class="o">/</span><span class="n">backup</span>
</code></pre></div>

<blockquote>
<p>Transfer the backup files locally on the <code>infra-manager</code> node.</p>
</blockquote>
<h3 id="identifying-the-failed-control-plane-node">Identifying the failed control plane node<a class="headerlink" href="#identifying-the-failed-control-plane-node" title="Permanent link">&para;</a></h3>
<p>1) First identify which node is the failed one, e.g. which is in NotReady state, using the <code>oc get nodes</code> command.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<blockquote>
<p>Example <code>ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab</code> will use this node for replacement.</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">                     </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="p">,</span><span class="n">SchedulingDisabled</span><span class="w">   </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span>
</code></pre></div>

<p>2) Drain the node, using oc adm drain command. </p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc adm drain ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab --ignore-daemonsets --delete-emptydir-data --force</span>
<span class="n">node</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">cordoned</span>
<span class="n">Warning</span><span class="p">:</span><span class="w"> </span><span class="n">ignoring</span><span class="w"> </span><span class="n">DaemonSet</span><span class="o">-</span><span class="n">managed</span><span class="w"> </span><span class="n">Pods</span><span class="p">:</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">cluster</span><span class="o">-</span><span class="n">management</span><span class="o">-</span><span class="n">backup</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">agent</span><span class="o">-</span><span class="n">lvlpm</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">cluster</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">tuning</span><span class="o">-</span><span class="n">operator</span><span class="o">/</span><span class="n">tuned</span><span class="o">-</span><span class="mi">2</span><span class="n">xqzr</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">dns</span><span class="o">/</span><span class="n">dns</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">x7x7p</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">dns</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">resolver</span><span class="o">-</span><span class="n">sd5qh</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">ca</span><span class="o">-</span><span class="mi">5</span><span class="n">nkn2</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">ingress</span><span class="o">-</span><span class="n">canary</span><span class="o">/</span><span class="n">ingress</span><span class="o">-</span><span class="n">canary</span><span class="o">-</span><span class="n">rngvh</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">storage</span><span class="o">/</span><span class="n">diskmaker</span><span class="o">-</span><span class="n">discovery</span><span class="o">-</span><span class="mi">4</span><span class="n">snb5</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">storage</span><span class="o">/</span><span class="n">diskmaker</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">vkkxk</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">ironic</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="mi">24</span><span class="n">kth</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">operator</span><span class="o">/</span><span class="n">machine</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">daemon</span><span class="o">-</span><span class="mi">9j45</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">operator</span><span class="o">/</span><span class="n">machine</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">ww4tz</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">monitoring</span><span class="o">/</span><span class="n">node</span><span class="o">-</span><span class="n">exporter</span><span class="o">-</span><span class="mi">9</span><span class="n">xshs</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">multus</span><span class="o">/</span><span class="n">multus</span><span class="o">-</span><span class="n">additional</span><span class="o">-</span><span class="n">cni</span><span class="o">-</span><span class="n">plugins</span><span class="o">-</span><span class="n">hkcdv</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">multus</span><span class="o">/</span><span class="n">multus</span><span class="o">-</span><span class="n">dt7qt</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">multus</span><span class="o">/</span><span class="n">network</span><span class="o">-</span><span class="n">metrics</span><span class="o">-</span><span class="n">daemon</span><span class="o">-</span><span class="mi">4j5</span><span class="n">fx</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">multus</span><span class="o">/</span><span class="n">whereabouts</span><span class="o">-</span><span class="n">reconciler</span><span class="o">-</span><span class="n">bv24v</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">diagnostics</span><span class="o">/</span><span class="n">network</span><span class="o">-</span><span class="n">check</span><span class="o">-</span><span class="n">target</span><span class="o">-</span><span class="n">btgf8</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">identity</span><span class="o">/</span><span class="n">network</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">identity</span><span class="o">-</span><span class="n">td874</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">operator</span><span class="o">/</span><span class="n">iptables</span><span class="o">-</span><span class="n">alerter</span><span class="o">-</span><span class="mi">75</span><span class="n">rfw</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">nmstate</span><span class="o">/</span><span class="n">nmstate</span><span class="o">-</span><span class="n">handler</span><span class="o">-</span><span class="n">tngrh</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">ovn</span><span class="o">-</span><span class="n">kubernetes</span><span class="o">/</span><span class="n">ovnkube</span><span class="o">-</span><span class="n">node</span><span class="o">-</span><span class="n">svz9x</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="o">/</span><span class="n">csi</span><span class="o">-</span><span class="n">cephfsplugin</span><span class="o">-</span><span class="n">rnkrk</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="o">/</span><span class="n">csi</span><span class="o">-</span><span class="n">rbdplugin</span><span class="o">-</span><span class="n">zg88h</span><span class="p">;</span><span class="w"> </span><span class="n">deleting</span><span class="w"> </span><span class="n">Pods</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">declare</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">controller</span><span class="p">:</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="o">/</span><span class="n">etcd</span><span class="o">-</span><span class="n">guard</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">kube</span><span class="o">-</span><span class="n">apiserver</span><span class="o">/</span><span class="n">kube</span><span class="o">-</span><span class="n">apiserver</span><span class="o">-</span><span class="n">guard</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">kube</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="o">/</span><span class="n">kube</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">guard</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="p">,</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="o">/</span><span class="n">openshift</span><span class="o">-</span><span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="o">-</span><span class="n">guard</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">multicluster</span><span class="o">-</span><span class="n">engine</span><span class="o">/</span><span class="n">clusterclaims</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="mi">7</span><span class="n">d56ff6fc9</span><span class="o">-</span><span class="mi">555</span><span class="n">pz</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">gitlab</span><span class="o">-</span><span class="n">shell</span><span class="o">-</span><span class="mi">55</span><span class="n">ccf645ff</span><span class="o">-</span><span class="n">ks77d</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">multicluster</span><span class="o">-</span><span class="n">engine</span><span class="o">/</span><span class="n">assisted</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="n">service</span><span class="o">-</span><span class="mi">0</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">multicluster</span><span class="o">-</span><span class="n">engine</span><span class="o">/</span><span class="n">assisted</span><span class="o">-</span><span class="n">service</span><span class="o">-</span><span class="mi">96</span><span class="n">cf94d9c</span><span class="o">-</span><span class="n">wg9zh</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">db</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">postgresql</span><span class="o">-</span><span class="n">postgresql</span><span class="o">-</span><span class="n">ha</span><span class="o">-</span><span class="n">sentinel</span><span class="o">-</span><span class="mi">8556</span><span class="n">d466c6</span><span class="o">-</span><span class="n">kd52n</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">logging</span><span class="o">/</span><span class="n">logging</span><span class="o">-</span><span class="n">loki</span><span class="o">-</span><span class="n">gateway</span><span class="o">-</span><span class="mi">7687</span><span class="n">c66f64</span><span class="o">-</span><span class="n">fxd4d</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">db</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">postgresql</span><span class="o">-</span><span class="n">postgresql</span><span class="o">-</span><span class="n">ha</span><span class="o">-</span><span class="n">proxy</span><span class="o">-</span><span class="mi">54</span><span class="n">c69f6cc</span><span class="o">-</span><span class="n">csqbz</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">cluster</span><span class="o">-</span><span class="n">management</span><span class="o">-</span><span class="n">observability</span><span class="o">/</span><span class="n">observability</span><span class="o">-</span><span class="n">thanos</span><span class="o">-</span><span class="n">rule</span><span class="o">-</span><span class="mi">1</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">cluster</span><span class="o">-</span><span class="n">baremetal</span><span class="o">-</span><span class="n">operator</span><span class="o">-</span><span class="mi">75</span><span class="n">fbb58cc5</span><span class="o">-</span><span class="n">lpqds</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">cluster</span><span class="o">-</span><span class="n">management</span><span class="o">-</span><span class="n">hub</span><span class="o">/</span><span class="n">cluster</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">registration</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="mi">7</span><span class="n">bcbcd64c5</span><span class="o">-</span><span class="n">s5p8l</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">open</span><span class="o">-</span><span class="n">cluster</span><span class="o">-</span><span class="n">management</span><span class="o">-</span><span class="n">observability</span><span class="o">/</span><span class="n">observability</span><span class="o">-</span><span class="n">grafana</span><span class="o">-</span><span class="mi">85</span><span class="n">c6896fd4</span><span class="o">-</span><span class="mi">7</span><span class="n">vxzp</span>
<span class="n">evicting</span><span class="w"> </span><span class="n">pod</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">set</span><span class="o">-</span><span class="n">operator</span><span class="o">-</span><span class="mi">65</span><span class="n">fbf4bd7</span><span class="o">-</span><span class="n">j2l2r</span>
<span class="o">**</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">Omitted</span><span class="w"> </span><span class="o">**</span>
<span class="n">pod</span><span class="o">/</span><span class="n">console</span><span class="o">-</span><span class="n">mce</span><span class="o">-</span><span class="n">console</span><span class="o">-</span><span class="mi">57</span><span class="n">b6b4968</span><span class="o">-</span><span class="n">jfl4x</span><span class="w"> </span><span class="n">evicted</span>
<span class="n">pod</span><span class="o">/</span><span class="n">logging</span><span class="o">-</span><span class="n">loki</span><span class="o">-</span><span class="n">query</span><span class="o">-</span><span class="n">frontend</span><span class="o">-</span><span class="mi">55</span><span class="n">bc666b5c</span><span class="o">-</span><span class="mi">87</span><span class="n">hmh</span><span class="w"> </span><span class="n">evicted</span>
<span class="n">pod</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">postgresql</span><span class="o">-</span><span class="n">postgresql</span><span class="o">-</span><span class="n">ha</span><span class="o">-</span><span class="n">keeper</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="n">evicted</span>
<span class="n">pod</span><span class="o">/</span><span class="n">apiserver</span><span class="o">-</span><span class="mi">776</span><span class="n">b5f87d7</span><span class="o">-</span><span class="mi">6</span><span class="n">t6vz</span><span class="w"> </span><span class="n">evicted</span>
<span class="n">node</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w"> </span><span class="n">drained</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</code></pre></div>

<p>3) Once drain complete, shutdown the node. (power off)</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">                     </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="p">,</span><span class="n">SchedulingDisabled</span><span class="w">   </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                      </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
</code></pre></div>

<p>4) Post power off, node will become not ready. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">                        </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">NotReady</span><span class="p">,</span><span class="n">SchedulingDisabled</span><span class="w">   </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h3 id="removing-the-node-from-the-etcd-cluster">Removing the node from the etcd cluster<a class="headerlink" href="#removing-the-node-from-the-etcd-cluster" title="Permanent link">&para;</a></h3>
<p>1) First fetch the pods from the openshift-etcd namespace which have the label k8s-app=etcd.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">pods</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">k8s</span><span class="o">-</span><span class="n">app</span><span class="o">=</span><span class="n">etcd</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">wide</span>
<span class="n">NAME</span><span class="w">                                                    </span><span class="n">READY</span><span class="w">   </span><span class="n">STATUS</span><span class="w">    </span><span class="n">RESTARTS</span><span class="w">   </span><span class="n">AGE</span><span class="w">   </span><span class="n">IP</span><span class="w">              </span><span class="n">NODE</span><span class="w">                                               </span><span class="n">NOMINATED</span><span class="w"> </span><span class="n">NODE</span><span class="w">   </span><span class="n">READINESS</span><span class="w"> </span><span class="n">GATES</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">12</span><span class="w">         </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145.151.92</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="mi">0</span><span class="o">/</span><span class="mi">0</span><span class="w">     </span><span class="ow">not</span><span class="w"> </span><span class="n">running</span><span class="w">   </span><span class="mi">12</span><span class="w">         </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145.151.93</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="mi">4</span><span class="o">/</span><span class="mi">4</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">8</span><span class="w">          </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145.151.94</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span>
</code></pre></div>

<p>2) Start a remote shall to one of the pods which shall be running, and not scheduled on the failed node.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="n">rsh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="n">etcd</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span>
<span class="n">sh</span><span class="o">-</span><span class="mf">5.1</span><span class="err">#</span><span class="w"> </span><span class="n">etcdctl</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="n">health</span>
<span class="err">{</span><span class="ss">&quot;level&quot;</span><span class="err">:</span><span class="ss">&quot;warn&quot;</span><span class="p">,</span><span class="ss">&quot;ts&quot;</span><span class="err">:</span><span class="ss">&quot;2025-05-27T17:09:44.374886Z&quot;</span><span class="p">,</span><span class="ss">&quot;logger&quot;</span><span class="err">:</span><span class="ss">&quot;client&quot;</span><span class="p">,</span><span class="ss">&quot;caller&quot;</span><span class="err">:</span><span class="ss">&quot;v3@v3.5.14/retry_interceptor.go:63&quot;</span><span class="p">,</span><span class="ss">&quot;msg&quot;</span><span class="err">:</span><span class="ss">&quot;retrying of unary invoker failed&quot;</span><span class="p">,</span><span class="ss">&quot;target&quot;</span><span class="err">:</span><span class="ss">&quot;etcd-endpoints://0xc00027a000/10.145.151.93:2379&quot;</span><span class="p">,</span><span class="ss">&quot;attempt&quot;</span><span class="err">:</span><span class="mi">0</span><span class="p">,</span><span class="ss">&quot;error&quot;</span><span class="err">:</span><span class="ss">&quot;rpc error: code = DeadlineExceeded desc = context deadline exceeded&quot;</span><span class="err">}</span>
<span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="mf">10.145.151.94</span><span class="err">:</span><span class="mi">2379</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nl">healthy</span><span class="p">:</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">committed</span><span class="w"> </span><span class="nl">proposal</span><span class="p">:</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">7.162307</span><span class="n">ms</span>
<span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="mf">10.145.151.92</span><span class="err">:</span><span class="mi">2379</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nl">healthy</span><span class="p">:</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">committed</span><span class="w"> </span><span class="nl">proposal</span><span class="p">:</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">7.213802</span><span class="n">ms</span>
<span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="mf">10.145.151.93</span><span class="err">:</span><span class="mi">2379</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nl">unhealthy</span><span class="p">:</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="nl">proposal</span><span class="p">:</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">deadline</span><span class="w"> </span><span class="n">exceeded</span>
<span class="nl">Error</span><span class="p">:</span><span class="w"> </span><span class="n">unhealthy</span><span class="w"> </span><span class="n">cluster</span>
<span class="n">sh</span><span class="o">-</span><span class="mf">5.1</span><span class="err">#</span>
</code></pre></div>

<p>3) check the status of the etdctl memebers. and removed the scale-in commpute. </p>
<div class="codehilite"><pre><span></span><code><span class="c">sh</span><span class="nb">-</span><span class="c">5</span><span class="nt">.</span><span class="c">1# etcdctl member list </span><span class="nb">-</span><span class="c">w table</span>
<span class="nb">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="c">|        ID        | STATUS  |                       NAME                       |         PEER ADDRS         |        CLIENT ADDRS        | IS LEARNER |</span>
<span class="nb">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="c">| 44ad9888985e068c | started | ncpvblvhub</span><span class="nb">-</span><span class="c">hubmaster</span><span class="nb">-</span><span class="c">101</span><span class="nt">.</span><span class="c">ncpvblvhub</span><span class="nt">.</span><span class="c">t</span><span class="nb">-</span><span class="c">mobile</span><span class="nt">.</span><span class="c">lab | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">92:2380 | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">92:2379 |      false |</span>
<span class="c">| f26d12a58d17e571 | started | ncpvblvhub</span><span class="nb">-</span><span class="c">hubmaster</span><span class="nb">-</span><span class="c">103</span><span class="nt">.</span><span class="c">ncpvblvhub</span><span class="nt">.</span><span class="c">t</span><span class="nb">-</span><span class="c">mobile</span><span class="nt">.</span><span class="c">lab | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">94:2380 | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">94:2379 |      false |</span>
<span class="c">| fc4de79a3d723a5c | Not running | ncpvblvhub</span><span class="nb">-</span><span class="c">hubmaster</span><span class="nb">-</span><span class="c">102</span><span class="nt">.</span><span class="c">ncpvblvhub</span><span class="nt">.</span><span class="c">t</span><span class="nb">-</span><span class="c">mobile</span><span class="nt">.</span><span class="c">lab | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">93:2380 | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">93:2379 |      false |</span>
<span class="nb">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="c">sh</span><span class="nb">-</span><span class="c">5</span><span class="nt">.</span><span class="c">1# etcdctl member remove fc4de79a3d723a5c</span>
<span class="c">Member fc4de79a3d723a5c removed from cluster 136d42915c2b0516</span>
<span class="c">sh</span><span class="nb">-</span><span class="c">5</span><span class="nt">.</span><span class="c">1# etcdctl member list </span><span class="nb">-</span><span class="c">w table</span>
<span class="nb">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="c">|        ID        | STATUS  |                       NAME                       |         PEER ADDRS         |        CLIENT ADDRS        | IS LEARNER |</span>
<span class="nb">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="c">| 44ad9888985e068c | started | ncpvblvhub</span><span class="nb">-</span><span class="c">hubmaster</span><span class="nb">-</span><span class="c">101</span><span class="nt">.</span><span class="c">ncpvblvhub</span><span class="nt">.</span><span class="c">t</span><span class="nb">-</span><span class="c">mobile</span><span class="nt">.</span><span class="c">lab | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">92:2380 | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">92:2379 |      false |</span>
<span class="c">| f26d12a58d17e571 | started | ncpvblvhub</span><span class="nb">-</span><span class="c">hubmaster</span><span class="nb">-</span><span class="c">103</span><span class="nt">.</span><span class="c">ncpvblvhub</span><span class="nt">.</span><span class="c">t</span><span class="nb">-</span><span class="c">mobile</span><span class="nt">.</span><span class="c">lab | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">94:2380 | https://10</span><span class="nt">.</span><span class="c">145</span><span class="nt">.</span><span class="c">151</span><span class="nt">.</span><span class="c">94:2379 |      false |</span>
<span class="nb">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="c">sh</span><span class="nb">-</span><span class="c">5</span><span class="nt">.</span><span class="c">1#</span>
</code></pre></div>

<p>4) check the etcd health now. </p>
<div class="codehilite"><pre><span></span><code><span class="n">sh</span><span class="o">-</span><span class="mf">5.1</span><span class="err">#</span><span class="w">  </span><span class="n">etcdctl</span><span class="w"> </span><span class="n">endpoint</span><span class="w"> </span><span class="n">health</span>
<span class="err">{</span><span class="ss">&quot;level&quot;</span><span class="err">:</span><span class="ss">&quot;warn&quot;</span><span class="p">,</span><span class="ss">&quot;ts&quot;</span><span class="err">:</span><span class="ss">&quot;2025-05-27T17:10:43.025287Z&quot;</span><span class="p">,</span><span class="ss">&quot;logger&quot;</span><span class="err">:</span><span class="ss">&quot;client&quot;</span><span class="p">,</span><span class="ss">&quot;caller&quot;</span><span class="err">:</span><span class="ss">&quot;v3@v3.5.14/retry_interceptor.go:63&quot;</span><span class="p">,</span><span class="ss">&quot;msg&quot;</span><span class="err">:</span><span class="ss">&quot;retrying of unary invoker failed&quot;</span><span class="p">,</span><span class="ss">&quot;target&quot;</span><span class="err">:</span><span class="ss">&quot;etcd-endpoints://0xc000020000/10.145.151.93:2379&quot;</span><span class="p">,</span><span class="ss">&quot;attempt&quot;</span><span class="err">:</span><span class="mi">0</span><span class="p">,</span><span class="ss">&quot;error&quot;</span><span class="err">:</span><span class="ss">&quot;rpc error: code = DeadlineExceeded desc = context deadline exceeded&quot;</span><span class="err">}</span>
<span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="mf">10.145.151.94</span><span class="err">:</span><span class="mi">2379</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nl">healthy</span><span class="p">:</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">committed</span><span class="w"> </span><span class="nl">proposal</span><span class="p">:</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6.399106</span><span class="n">ms</span>
<span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="mf">10.145.151.92</span><span class="err">:</span><span class="mi">2379</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nl">healthy</span><span class="p">:</span><span class="w"> </span><span class="n">successfully</span><span class="w"> </span><span class="n">committed</span><span class="w"> </span><span class="nl">proposal</span><span class="p">:</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">6.344247</span><span class="n">ms</span>
<span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="mf">10.145.151.93</span><span class="err">:</span><span class="mi">2379</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nl">unhealthy</span><span class="p">:</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">commit</span><span class="w"> </span><span class="nl">proposal</span><span class="p">:</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">deadline</span><span class="w"> </span><span class="n">exceeded</span>
<span class="nl">Error</span><span class="p">:</span><span class="w"> </span><span class="n">unhealthy</span><span class="w"> </span><span class="n">cluster</span>
<span class="n">sh</span><span class="o">-</span><span class="mf">5.1</span><span class="err">#</span>
<span class="k">exit</span>
<span class="n">command</span><span class="w"> </span><span class="n">terminated</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="k">exit</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="mi">1</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>5) run the following command to Turn off the quorum guard:</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">patch</span><span class="w"> </span><span class="nx">etcd</span><span class="o">/</span><span class="nx">cluster</span><span class="w"> </span><span class="o">--</span><span class="k">type</span><span class="p">=</span><span class="nx">merge</span><span class="w"> </span><span class="o">-</span><span class="nx">p</span><span class="w"> </span><span class="err">&#39;</span><span class="p">{</span><span class="s">&quot;spec&quot;</span><span class="p">:{</span><span class="s">&quot;unsupportedConfigOverrides&quot;</span><span class="p">:{</span><span class="s">&quot;useUnsupportedUnsafeNonHANonProductionUnstableEtcd&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}}}</span><span class="err">&#39;</span>
<span class="nx">etcd</span><span class="p">.</span><span class="nx">operator</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="w"> </span><span class="nx">patched</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span>
</code></pre></div>

<p>6) Remove the old secrets for the unhealthy etcd member that was removed by running the following commands.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">secrets</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">master</span><span class="o">-</span><span class="mi">102</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">peer</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">              </span><span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">tls</span><span class="w">   </span><span class="mi">2</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">serving</span><span class="o">-</span><span class="n">metrics</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">tls</span><span class="w">   </span><span class="mi">2</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">serving</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">           </span><span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">tls</span><span class="w">   </span><span class="mi">2</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">#for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">secrets</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">awk</span>
<span class="s1">&#39;{print $1}&#39;</span><span class="err">`</span><span class="p">;</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">secrets</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="err">$</span><span class="n">i</span><span class="p">;</span><span class="w"> </span><span class="n">done</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="err">`</span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">secrets</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">master</span><span class="o">-</span><span class="mi">102</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">awk</span><span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="err">`</span><span class="p">;</span><span class="w"> </span><span class="n">do</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">secrets</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="err">$</span><span class="n">i</span><span class="p">;</span><span class="w"> </span><span class="n">done</span>
<span class="n">secret</span><span class="w"> </span><span class="ss">&quot;etcd-peer-ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="n">secret</span><span class="w"> </span><span class="ss">&quot;etcd-serving-metrics-ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="n">secret</span><span class="w"> </span><span class="ss">&quot;etcd-serving-ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">secrets</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">etcd</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">master</span><span class="o">-</span><span class="mi">102</span><span class="w">                                                                 </span><span class="n">etcd</span><span class="o">-</span><span class="n">peer</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">              </span><span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">tls</span><span class="w">   </span><span class="mi">2</span><span class="w">      </span><span class="mi">3</span><span class="n">s</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">serving</span><span class="o">-</span><span class="n">metrics</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">tls</span><span class="w">   </span><span class="mi">2</span><span class="w">      </span><span class="mi">2</span><span class="n">s</span>
<span class="n">etcd</span><span class="o">-</span><span class="n">serving</span><span class="o">-</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">           </span><span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">tls</span><span class="w">   </span><span class="mi">2</span><span class="w">      </span><span class="mi">3</span><span class="n">s</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h3 id="fetch-the-output-of-the-failed-nodes-machine-cr">Fetch the output of the failed node’s machine CR<a class="headerlink" href="#fetch-the-output-of-the-failed-nodes-machine-cr" title="Permanent link">&para;</a></h3>
<p>It is needed to fetch the output of the failed node’s machine CR as it contains labels related to the cluster. Then it shall be m odified, e.g. status part shall be removed, annotation of last applied configuration, <code>machine.openshift.op/instance-state:
provisioned</code> shall be removed, creation timestamp, finalizer, generation, resource version,
uid, from spec, the providerID shall be also removed.</p>
<p>1) Get the list of node and find the node you want to remove from machines. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">                        </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">NotReady</span><span class="p">,</span><span class="n">SchedulingDisabled</span><span class="w">   </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">                         </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span>
</code></pre></div>

<p>2) using the follow command to ge the node need to removed.  using <code>-o wide</code></p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="w"> </span><span class="o">-</span><span class="n">A</span>
<span class="n">NAMESPACE</span><span class="w">               </span><span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>3) take a backup of these nodes from file. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">yaml</span><span class="w"> </span><span class="err">`</span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">wide</span><span class="w"> </span><span class="o">|</span><span class="n">grep</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="o">|</span><span class="n">awk</span><span class="w"> </span><span class="err">{</span><span class="s1">&#39;print $1&#39;</span><span class="err">}`</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">backup_machinemaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">yaml</span>
</code></pre></div>

<p>4) just collecting all those outputs here. </p>
<blockquote>
<p>just refer to productline guide for reference sample tempalte</p>
</blockquote>
<p><img alt="alt text" src="../image.png" /></p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">backup_machinemaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">yaml</span>
<span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">v1beta1</span>
<span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">Machine</span>
<span class="nx">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nx">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">instance</span><span class="o">-</span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">unmanaged</span>
<span class="w">    </span><span class="nx">metal3</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">BareMetalHost</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span><span class="o">/</span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span>
<span class="w">  </span><span class="nx">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-03-13T23:51:45Z&quot;</span>
<span class="w">  </span><span class="nx">finalizers</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">machine</span><span class="p">.</span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span>
<span class="w">  </span><span class="nx">generation</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="nx">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">cluster</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="nx">role</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span>
<span class="w">  </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">1</span>
<span class="w">  </span><span class="kn">namespace</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="w">  </span><span class="nx">resourceVersion</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;140998860&quot;</span>
<span class="w">  </span><span class="nx">uid</span><span class="p">:</span><span class="w"> </span><span class="nx">a53b879c</span><span class="o">-</span><span class="nx">a886</span><span class="o">-</span><span class="mi">4381</span><span class="o">-</span><span class="nx">a1bb</span><span class="o">-</span><span class="mi">9322333</span><span class="nx">fa76e</span>
<span class="nx">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nx">lifecycleHooks</span><span class="p">:</span>
<span class="w">    </span><span class="nx">preDrain</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">EtcdQuorumOperator</span>
<span class="w">      </span><span class="nx">owner</span><span class="p">:</span><span class="w"> </span><span class="nx">clusteroperator</span><span class="o">/</span><span class="nx">etcd</span>
<span class="w">  </span><span class="nx">metadata</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="nx">providerID</span><span class="p">:</span><span class="w"> </span><span class="nx">baremetalhost</span><span class="p">:</span><span class="c1">///openshift-machine-api/ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab/346b01e0-6bb8-40bd-8db3-d3eabf4d44f1</span>
<span class="w">  </span><span class="nx">providerSpec</span><span class="p">:</span>
<span class="w">    </span><span class="nx">value</span><span class="p">:</span>
<span class="w">      </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">baremetal</span><span class="p">.</span><span class="nx">cluster</span><span class="p">.</span><span class="nx">k8s</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">v1alpha1</span>
<span class="w">      </span><span class="nx">customDeploy</span><span class="p">:</span>
<span class="w">        </span><span class="nx">method</span><span class="p">:</span><span class="w"> </span><span class="nx">install_coreos</span>
<span class="w">      </span><span class="nx">hostSelector</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="nx">image</span><span class="p">:</span>
<span class="w">        </span><span class="nx">checksum</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="nx">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">BareMetalMachineProviderSpec</span>
<span class="w">      </span><span class="nx">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nx">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="nx">null</span>
<span class="w">      </span><span class="nx">userData</span><span class="p">:</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span><span class="o">-</span><span class="nx">user</span><span class="o">-</span><span class="nx">data</span><span class="o">-</span><span class="nx">managed</span>
<span class="nx">status</span><span class="p">:</span>
<span class="w">  </span><span class="nx">addresses</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">fde1</span><span class="p">:</span><span class="mi">53</span><span class="nx">ba</span><span class="p">:</span><span class="nx">e9a0</span><span class="p">:</span><span class="nx">de11</span><span class="p">:</span><span class="mi">912</span><span class="nx">f</span><span class="p">:</span><span class="mi">2112</span><span class="p">:</span><span class="mi">633</span><span class="nx">a</span><span class="p">:</span><span class="mi">4</span><span class="nx">b75</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">10.145.151.93</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InternalIP</span>
<span class="w">  </span><span class="nx">conditions</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">lastTransitionTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-03-14T00:04:57Z&quot;</span>
<span class="w">    </span><span class="nx">message</span><span class="p">:</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Drain</span><span class="w"> </span><span class="nx">operation</span><span class="w"> </span><span class="nx">currently</span><span class="w"> </span><span class="nx">blocked</span><span class="w"> </span><span class="nx">by</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nx">Name</span><span class="p">:</span><span class="nx">EtcdQuorumOperator</span><span class="w"> </span><span class="nx">Owner</span><span class="p">:</span><span class="nx">clusteroperator</span><span class="o">/</span><span class="nx">etcd</span><span class="p">}]</span><span class="err">&#39;</span>
<span class="w">    </span><span class="nx">reason</span><span class="p">:</span><span class="w"> </span><span class="nx">HookPresent</span>
<span class="w">    </span><span class="nx">severity</span><span class="p">:</span><span class="w"> </span><span class="nx">Warning</span>
<span class="w">    </span><span class="nx">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;False&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">Drainable</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">lastTransitionTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-03-14T00:03:59Z&quot;</span>
<span class="w">    </span><span class="nx">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">InstanceExists</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">lastTransitionTime</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-03-13T23:58:56Z&quot;</span>
<span class="w">    </span><span class="nx">status</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True&quot;</span>
<span class="w">    </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">Terminable</span>
<span class="w">  </span><span class="nx">lastUpdated</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2025-05-27T17:08:29Z&quot;</span>
<span class="w">  </span><span class="nx">nodeRef</span><span class="p">:</span>
<span class="w">    </span><span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">Node</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span>
<span class="w">    </span><span class="nx">uid</span><span class="p">:</span><span class="w"> </span><span class="nx">cdc0d098</span><span class="o">-</span><span class="mi">638</span><span class="nx">f</span><span class="o">-</span><span class="mi">4</span><span class="nx">c2d</span><span class="o">-</span><span class="nx">b4ba</span><span class="o">-</span><span class="mi">4</span><span class="nx">c2c1ebc1c10</span>
<span class="w">  </span><span class="nx">phase</span><span class="p">:</span><span class="w"> </span><span class="nx">Running</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">backup_machinemaster</span><span class="o">-</span><span class="mi">102</span><span class="nx">_editted</span><span class="p">.</span><span class="nx">yaml</span>
<span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">v1beta1</span>
<span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">Machine</span>
<span class="nx">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nx">annotations</span><span class="p">:</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">instance</span><span class="o">-</span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">unmanaged</span>
<span class="w">    </span><span class="nx">metal3</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">BareMetalHost</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span><span class="o">/</span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span>
<span class="w">  </span><span class="nx">finalizers</span><span class="p">:</span>
<span class="w">  </span><span class="o">-</span><span class="w"> </span><span class="nx">machine</span><span class="p">.</span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span>
<span class="w">  </span><span class="nx">generation</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">  </span><span class="nx">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">cluster</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="nx">role</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span>
<span class="w">  </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">1</span>
<span class="w">  </span><span class="kn">namespace</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="nx">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nx">lifecycleHooks</span><span class="p">:</span>
<span class="w">    </span><span class="nx">preDrain</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">EtcdQuorumOperator</span>
<span class="w">      </span><span class="nx">owner</span><span class="p">:</span><span class="w"> </span><span class="nx">clusteroperator</span><span class="o">/</span><span class="nx">etcd</span>
<span class="w">  </span><span class="nx">metadata</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="nx">providerID</span><span class="p">:</span><span class="w"> </span><span class="nx">baremetalhost</span><span class="p">:</span><span class="c1">///openshift-machine-api/ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab/346b01e0-6bb8-40bd-8db3-d3eabf4d44f1</span>
<span class="w">  </span><span class="nx">providerSpec</span><span class="p">:</span>
<span class="w">    </span><span class="nx">value</span><span class="p">:</span>
<span class="w">      </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">baremetal</span><span class="p">.</span><span class="nx">cluster</span><span class="p">.</span><span class="nx">k8s</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">v1alpha1</span>
<span class="w">      </span><span class="nx">customDeploy</span><span class="p">:</span>
<span class="w">        </span><span class="nx">method</span><span class="p">:</span><span class="w"> </span><span class="nx">install_coreos</span>
<span class="w">      </span><span class="nx">hostSelector</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="nx">image</span><span class="p">:</span>
<span class="w">        </span><span class="nx">checksum</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="nx">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">BareMetalMachineProviderSpec</span>
<span class="w">      </span><span class="nx">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nx">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="nx">null</span>
<span class="w">      </span><span class="nx">userData</span><span class="p">:</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span><span class="o">-</span><span class="nx">user</span><span class="o">-</span><span class="nx">data</span><span class="o">-</span><span class="nx">managed</span>

<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">nodes</span>
<span class="nx">NAME</span><span class="w">                                               </span><span class="nx">STATUS</span><span class="w">                        </span><span class="nx">ROLES</span><span class="w">                                 </span><span class="nx">AGE</span><span class="w">   </span><span class="nx">VERSION</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">                         </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">NotReady</span><span class="p">,</span><span class="nx">SchedulingDisabled</span><span class="w">   </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">103</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">                         </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">                         </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">                         </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
</code></pre></div>

<h3 id="removing-failed-nodes-osds-from-odf">Removing failed node’s OSDs from ODF<a class="headerlink" href="#removing-failed-nodes-osds-from-odf" title="Permanent link">&para;</a></h3>
<p>1) Get the list of pods from <code>openshift-storage</code> namespace here. </p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get pods -n openshift-storage -o wide | grep -i ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab</span>
<span class="n">csi</span><span class="o">-</span><span class="n">cephfsplugin</span><span class="o">-</span><span class="n">rnkrk</span><span class="w">                                            </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">6</span><span class="w">              </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145</span><span class="o">.</span><span class="mf">151.93</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">csi</span><span class="o">-</span><span class="n">rbdplugin</span><span class="o">-</span><span class="n">provisioner</span><span class="o">-</span><span class="mi">646</span><span class="n">d95bdd9</span><span class="o">-</span><span class="mi">496</span><span class="n">ng</span><span class="w">                        </span><span class="mi">6</span><span class="o">/</span><span class="mi">6</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">15</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">1.43</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">csi</span><span class="o">-</span><span class="n">rbdplugin</span><span class="o">-</span><span class="n">zg88h</span><span class="w">                                               </span><span class="mi">3</span><span class="o">/</span><span class="mi">3</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">9</span><span class="w">              </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145</span><span class="o">.</span><span class="mf">151.93</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">crashcollector</span><span class="o">-</span><span class="mi">11</span><span class="n">cef195e99cf42211bc5b21918ec486</span><span class="o">-</span><span class="n">b8jpz</span><span class="w">   </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">26</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.19</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">exporter</span><span class="o">-</span><span class="mi">11</span><span class="n">cef195e99cf42211bc5b21918ec486</span><span class="o">-</span><span class="mi">6</span><span class="n">f8c85r84bf</span><span class="w">   </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">26</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.20</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">mon</span><span class="o">-</span><span class="n">a</span><span class="o">-</span><span class="mi">66</span><span class="n">bcddd94</span><span class="o">-</span><span class="n">wbfs4</span><span class="w">                                   </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">26</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.9</span><span class="w">       </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="mi">54</span><span class="n">d5b7dd6b</span><span class="o">-</span><span class="n">vjf4f</span><span class="w">                                  </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">27</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.11</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="mi">79</span><span class="n">fb5f7965</span><span class="o">-</span><span class="n">wpgpq</span><span class="w">                                  </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">27</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.17</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># </span>
</code></pre></div>

<p>2) remove the mon and osd pods running on the master2 nodes. then check the status of the pod's to make sure, it's terminated. </p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc scale deployment rook-ceph-mon-a --replicas=0 -n openshift-storage</span>
<span class="n">deployment</span><span class="o">.</span><span class="n">apps</span><span class="o">/</span><span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">mon</span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="n">scaled</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc scale deployment rook-ceph-osd-0 --replicas=0 -n openshift-storage</span>
<span class="n">deployment</span><span class="o">.</span><span class="n">apps</span><span class="o">/</span><span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="mi">0</span><span class="w"> </span><span class="n">scaled</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1">#</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc scale deployment rook-ceph-osd-5 --replicas=0 -n openshift-storage</span>
<span class="n">deployment</span><span class="o">.</span><span class="n">apps</span><span class="o">/</span><span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="mi">5</span><span class="w"> </span><span class="n">scaled</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get pods -n openshift-storage -o wide | grep -i ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab</span>
<span class="n">csi</span><span class="o">-</span><span class="n">cephfsplugin</span><span class="o">-</span><span class="n">rnkrk</span><span class="w">                                            </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">       </span><span class="mi">6</span><span class="w">              </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145</span><span class="o">.</span><span class="mf">151.93</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">csi</span><span class="o">-</span><span class="n">rbdplugin</span><span class="o">-</span><span class="n">provisioner</span><span class="o">-</span><span class="mi">646</span><span class="n">d95bdd9</span><span class="o">-</span><span class="mi">496</span><span class="n">ng</span><span class="w">                        </span><span class="mi">6</span><span class="o">/</span><span class="mi">6</span><span class="w">     </span><span class="n">Running</span><span class="w">       </span><span class="mi">0</span><span class="w">              </span><span class="mi">15</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">1.43</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">csi</span><span class="o">-</span><span class="n">rbdplugin</span><span class="o">-</span><span class="n">zg88h</span><span class="w">                                               </span><span class="mi">3</span><span class="o">/</span><span class="mi">3</span><span class="w">     </span><span class="n">Running</span><span class="w">       </span><span class="mi">9</span><span class="w">              </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145</span><span class="o">.</span><span class="mf">151.93</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">rook</span><span class="o">-</span><span class="n">ceph</span><span class="o">-</span><span class="n">exporter</span><span class="o">-</span><span class="mi">11</span><span class="n">cef195e99cf42211bc5b21918ec486</span><span class="o">-</span><span class="mi">6</span><span class="n">f8c85r84bf</span><span class="w">   </span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="w">     </span><span class="n">Terminating</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">26</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.20</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc scale deployment --selector=app=rook-ceph-crashcollector,node_name=ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab  --replicas=0 -n openshift-storage</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">scale</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get pods -n openshift-storage -o wide | grep -i ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab                csi-cephfsplugin-rnkrk                                            2/2     Running   6              71d   10.145.151.93    ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab   &lt;none&gt;           &lt;none&gt;</span>
<span class="n">csi</span><span class="o">-</span><span class="n">rbdplugin</span><span class="o">-</span><span class="n">provisioner</span><span class="o">-</span><span class="mi">646</span><span class="n">d95bdd9</span><span class="o">-</span><span class="mi">496</span><span class="n">ng</span><span class="w">                        </span><span class="mi">6</span><span class="o">/</span><span class="mi">6</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">              </span><span class="mi">15</span><span class="n">d</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">1.43</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">csi</span><span class="o">-</span><span class="n">rbdplugin</span><span class="o">-</span><span class="n">zg88h</span><span class="w">                                               </span><span class="mi">3</span><span class="o">/</span><span class="mi">3</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">9</span><span class="w">              </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">10.145</span><span class="o">.</span><span class="mf">151.93</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</code></pre></div>

<p>2.1) remove the label from the node. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="n">ocs</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span>
<span class="n">node</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w"> </span><span class="n">unlabeled</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>3) Now run the OSD removal script to delete the OSD completely from the cluster.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">FAILED_OSD_IDS</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="w"> </span><span class="n">FORCE_OSD_REMOVAL</span><span class="o">=</span><span class="k">true</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">-</span>
<span class="n">Error</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">server</span><span class="w"> </span><span class="p">(</span><span class="n">AlreadyExists</span><span class="p">)</span><span class="err">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="n">creating</span><span class="w"> </span><span class="ss">&quot;STDIN&quot;</span><span class="err">:</span><span class="w"> </span><span class="n">jobs</span><span class="p">.</span><span class="n">batch</span><span class="w"> </span><span class="ss">&quot;ocs-osd-removal-job&quot;</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="ow">exists</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">gre</span><span class="w"> </span><span class="n">removal</span>
<span class="nl">bash</span><span class="p">:</span><span class="w"> </span><span class="nl">gre</span><span class="p">:</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">found</span><span class="p">...</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">removal</span>
<span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="o">-</span><span class="n">job</span><span class="w">                                      </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w">           </span><span class="mi">14</span><span class="n">m</span><span class="w">        </span><span class="mi">33</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="o">-</span><span class="n">job</span>
<span class="n">job</span><span class="p">.</span><span class="n">batch</span><span class="w"> </span><span class="ss">&quot;ocs-osd-removal-job&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">FAILED_OSD_IDS</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="w"> </span><span class="n">FORCE_OSD_REMOVAL</span><span class="o">=</span><span class="k">true</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="o">-</span>
<span class="n">job</span><span class="p">.</span><span class="n">batch</span><span class="o">/</span><span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="o">-</span><span class="n">job</span><span class="w"> </span><span class="n">created</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">removal</span><span class="w">                                                                    </span><span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="o">-</span><span class="n">job</span><span class="w">                                      </span><span class="mi">0</span><span class="o">/</span><span class="mi">1</span><span class="w">           </span><span class="mi">5</span><span class="n">s</span><span class="w">         </span><span class="mi">5</span><span class="n">s</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="n">removal</span>
<span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="o">-</span><span class="n">job</span><span class="w">                                      </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w">           </span><span class="mi">13</span><span class="n">s</span><span class="w">        </span><span class="mi">14</span><span class="n">s</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="n">ocs</span><span class="o">-</span><span class="n">osd</span><span class="o">-</span><span class="n">removal</span><span class="o">-</span><span class="n">job</span><span class="w">                                                            </span><span class="n">job</span><span class="p">.</span><span class="n">batch</span><span class="w"> </span><span class="ss">&quot;ocs-osd-removal-job&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>4) At last remove the pv as well. post check that ceph cluster.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="n">#oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">pv</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="k">local</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">released</span>
<span class="k">local</span><span class="o">-</span><span class="n">pv</span><span class="o">-</span><span class="mi">4</span><span class="n">fcd3797</span><span class="w">                          </span><span class="mi">3576</span><span class="n">Gi</span><span class="w">     </span><span class="n">RWO</span><span class="w">            </span><span class="k">Delete</span><span class="w">           </span><span class="n">Released</span><span class="w">    </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="o">/</span><span class="n">ocs</span><span class="o">-</span><span class="n">deviceset</span><span class="o">-</span><span class="n">localblockstorage</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="mi">0</span><span class="n">ll69z</span><span class="w">                      </span><span class="n">localblockstorage</span><span class="w">     </span><span class="o">&lt;</span><span class="n">unset</span><span class="o">&gt;</span><span class="w">                          </span><span class="mi">71</span><span class="n">d</span>
<span class="k">local</span><span class="o">-</span><span class="n">pv</span><span class="o">-</span><span class="n">cb7421c8</span><span class="w">                          </span><span class="mi">3576</span><span class="n">Gi</span><span class="w">     </span><span class="n">RWO</span><span class="w">            </span><span class="k">Delete</span><span class="w">           </span><span class="n">Released</span><span class="w">    </span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="o">/</span><span class="n">ocs</span><span class="o">-</span><span class="n">deviceset</span><span class="o">-</span><span class="n">localblockstorage</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="mi">1</span><span class="n">w8q46</span><span class="w">                      </span><span class="n">localblockstorage</span><span class="w">     </span><span class="o">&lt;</span><span class="n">unset</span><span class="o">&gt;</span><span class="w">                          </span><span class="mi">33</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">pv</span><span class="w"> </span><span class="k">local</span><span class="o">-</span><span class="n">pv</span><span class="o">-</span><span class="mi">4</span><span class="n">fcd3797</span><span class="w"> </span><span class="k">local</span><span class="o">-</span><span class="n">pv</span><span class="o">-</span><span class="n">cb7421c8</span>
<span class="n">persistentvolume</span><span class="w"> </span><span class="ss">&quot;local-pv-4fcd3797&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="n">persistentvolume</span><span class="w"> </span><span class="ss">&quot;local-pv-cb7421c8&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>

<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">clusteroperator</span><span class="w"> </span><span class="n">baremetal</span>
<span class="n">NAME</span><span class="w">        </span><span class="n">VERSION</span><span class="w">   </span><span class="n">AVAILABLE</span><span class="w">   </span><span class="n">PROGRESSING</span><span class="w">   </span><span class="n">DEGRADED</span><span class="w">   </span><span class="n">SINCE</span><span class="w">   </span><span class="n">MESSAGE</span>
<span class="n">baremetal</span><span class="w">   </span><span class="mf">4.16.24</span><span class="w">   </span><span class="k">True</span><span class="w">        </span><span class="k">False</span><span class="w">         </span><span class="k">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
</code></pre></div>

<h3 id="removing-the-node-from-the-cluster">Removing the node from the cluster<a class="headerlink" href="#removing-the-node-from-the-cluster" title="Permanent link">&para;</a></h3>
<p>1) Get the node status of <code>master-102</code>. from <code>bmh</code>, <code>machine</code> etc. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">bmh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="k">STATE</span><span class="w">       </span><span class="n">CONSUMER</span><span class="w">                          </span><span class="n">ONLINE</span><span class="w">   </span><span class="n">ERROR</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">bmh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span>
<span class="n">baremetalhost</span><span class="p">.</span><span class="n">metal3</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="ss">&quot;ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab&quot;</span><span class="w"> </span><span class="n">deleted</span>

<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">bmh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="k">STATE</span><span class="w">       </span><span class="n">CONSUMER</span><span class="w">                          </span><span class="n">ONLINE</span><span class="w">   </span><span class="n">ERROR</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span>
</code></pre></div>

<p>2) Check the <code>machines.machine</code> api and delete it. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="n">Failed</span><span class="w">                           </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">#oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">describe</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="n">master</span><span class="o">-</span><span class="mi">102</span>
<span class="w">              </span><span class="n">metal3</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="nl">BareMetalHost</span><span class="p">:</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span>
<span class="w">  </span><span class="n">Provider</span><span class="w"> </span><span class="nl">ID</span><span class="p">:</span><span class="w">  </span><span class="nl">baremetalhost</span><span class="p">:</span><span class="o">///</span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="o">/</span><span class="mi">346</span><span class="n">b01e0</span><span class="o">-</span><span class="mi">6</span><span class="n">bb8</span><span class="o">-</span><span class="mi">40</span><span class="n">bd</span><span class="o">-</span><span class="mi">8</span><span class="n">db3</span><span class="o">-</span><span class="n">d3eabf4d44f1</span>
<span class="w">    </span><span class="nl">Name</span><span class="p">:</span><span class="w">  </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span>
<span class="n">machine</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="ss">&quot;ncpvblvhub-b6cjs-master-1&quot;</span><span class="w"> </span><span class="n">deleted</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>

<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span>
</code></pre></div>

<p>3) Now check the status of <code>bmh</code>, <code>machines</code> and <code>nodes</code>, to make sure <code>master-2</code> is completly removed. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="n">#oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">bmh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="k">STATE</span><span class="w">       </span><span class="n">CONSUMER</span><span class="w">                          </span><span class="n">ONLINE</span><span class="w">   </span><span class="n">ERROR</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<blockquote>
<p>After this step, the node or failed parts of it can be safely replaced.</p>
</blockquote>
<h2 id="adding-back-the-node-control-plane-node">Adding back the node control plane node<a class="headerlink" href="#adding-back-the-node-control-plane-node" title="Permanent link">&para;</a></h2>
<h3 id="create-bmh-and-machine-crs">Create BMH and Machine CRs<a class="headerlink" href="#create-bmh-and-machine-crs" title="Permanent link">&para;</a></h3>
<p>1) Check the list of nodes in cluster now. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>2) In the openshift-machine-api namespace two secrets shall be created. One is for the BMC access and the other one stores the networking configuration.</p>
<p>2.0) The data of secret for BMC access is simply base64 encoded.</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">bmc</span><span class="o">-</span><span class="nx">credential</span><span class="o">-</span><span class="nx">hub</span><span class="p">.</span><span class="nx">yaml</span>
<span class="o">---</span>
<span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">v1</span>
<span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">Secret</span>
<span class="nx">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="nx">bmc</span><span class="o">-</span><span class="nx">secret</span>
<span class="w">  </span><span class="kn">namespace</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="nx">data</span><span class="p">:</span>
<span class="w">  </span><span class="nx">username</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cm9vdA==&quot;</span>
<span class="w">  </span><span class="nx">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Y2Fsdmlu&quot;</span>
<span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">opaque</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span>
</code></pre></div>

<p>2.1) Then the networking configuration shall be created as a secret. It is needed as the default setting is DHCP for the nodes. These information can be simply copied from the agent-config.yaml which was used for the deployment of the HUB cluster. If node replacement was done (including NIC) make sure to update the MAC addresses!</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">master</span><span class="o">-</span><span class="mi">102</span><span class="nx">_network_config</span><span class="p">.</span><span class="nx">yaml</span>
<span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">v1</span>
<span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">Secret</span>
<span class="nx">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">102</span><span class="o">-</span><span class="nx">network</span><span class="o">-</span><span class="nx">config</span><span class="o">-</span><span class="nx">secret</span>
<span class="w">  </span><span class="kn">namespace</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">Opaque</span>
<span class="nx">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nx">nmstate</span><span class="p">:</span><span class="w"> </span><span class="o">|</span>
<span class="w">    </span><span class="nx">interfaces</span><span class="p">:</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="mi">1</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">ethernet</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">identifier</span><span class="p">:</span><span class="w"> </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">C4</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="nx">BD</span><span class="p">:</span><span class="nx">F9</span><span class="p">:</span><span class="mi">7</span><span class="nx">F</span><span class="p">:</span><span class="mi">48</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="mi">2</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">ethernet</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">identifier</span><span class="p">:</span><span class="w"> </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">C4</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="nx">BD</span><span class="p">:</span><span class="nx">F9</span><span class="p">:</span><span class="mi">7</span><span class="nx">F</span><span class="p">:</span><span class="mi">49</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">ethernet</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">identifier</span><span class="p">:</span><span class="w"> </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">C4</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="nx">BD</span><span class="p">:</span><span class="mi">4</span><span class="nx">A</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">8</span><span class="nx">A</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">ethernet</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">identifier</span><span class="p">:</span><span class="w"> </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">C4</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="nx">BD</span><span class="p">:</span><span class="mi">4</span><span class="nx">A</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">8</span><span class="nx">B</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">ethernet</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">identifier</span><span class="p">:</span><span class="w"> </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">C4</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="nx">BD</span><span class="p">:</span><span class="mi">4</span><span class="nx">A</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">8</span><span class="nx">E</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">2</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">ethernet</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">identifier</span><span class="p">:</span><span class="w"> </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">mac</span><span class="o">-</span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">C4</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="nx">BD</span><span class="p">:</span><span class="mi">4</span><span class="nx">A</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">8</span><span class="nx">F</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="nx">bond</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">bond</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">link</span><span class="o">-</span><span class="nx">aggregation</span><span class="p">:</span>
<span class="w">          </span><span class="nx">mode</span><span class="p">:</span><span class="w"> </span><span class="nx">active</span><span class="o">-</span><span class="nx">backup</span>
<span class="w">          </span><span class="nx">options</span><span class="p">:</span>
<span class="w">            </span><span class="nx">miimon</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="w">          </span><span class="nx">port</span><span class="p">:</span>
<span class="w">          </span><span class="o">-</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="mi">1</span>
<span class="w">          </span><span class="o">-</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="mi">2</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="nx">bond</span><span class="o">-</span><span class="mi">1</span>
<span class="w">        </span><span class="nx">link</span><span class="o">-</span><span class="nx">aggregation</span><span class="p">:</span>
<span class="w">          </span><span class="nx">mode</span><span class="p">:</span><span class="w"> </span><span class="nx">active</span><span class="o">-</span><span class="nx">backup</span>
<span class="w">          </span><span class="nx">options</span><span class="p">:</span>
<span class="w">            </span><span class="nx">miimon</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="w">          </span><span class="nx">port</span><span class="p">:</span>
<span class="w">          </span><span class="o">-</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span>
<span class="w">          </span><span class="o">-</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">2</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">bond</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="nx">bond</span><span class="o">-</span><span class="mi">2</span>
<span class="w">        </span><span class="nx">link</span><span class="o">-</span><span class="nx">aggregation</span><span class="p">:</span>
<span class="w">          </span><span class="nx">mode</span><span class="p">:</span><span class="w"> </span><span class="nx">active</span><span class="o">-</span><span class="nx">backup</span>
<span class="w">          </span><span class="nx">options</span><span class="p">:</span>
<span class="w">            </span><span class="nx">miimon</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<span class="w">          </span><span class="nx">port</span><span class="p">:</span>
<span class="w">          </span><span class="o">-</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span>
<span class="w">          </span><span class="o">-</span><span class="w"> </span><span class="nx">tenant</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="mi">2</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">bond</span>
<span class="w">      </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="nx">bond</span><span class="m m-Double">.200</span>
<span class="w">        </span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">vlan</span>
<span class="w">        </span><span class="nx">state</span><span class="p">:</span><span class="w"> </span><span class="nx">up</span>
<span class="w">        </span><span class="nx">mtu</span><span class="p">:</span><span class="w"> </span><span class="mi">9126</span>
<span class="w">        </span><span class="nx">ipv4</span><span class="p">:</span>
<span class="w">          </span><span class="nx">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">          </span><span class="nx">dhcp</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">          </span><span class="nx">address</span><span class="p">:</span>
<span class="w">            </span><span class="o">-</span><span class="w"> </span><span class="nx">ip</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">10.145.151.93</span>
<span class="w">              </span><span class="nx">prefix</span><span class="o">-</span><span class="nx">length</span><span class="p">:</span><span class="w"> </span><span class="mi">26</span>
<span class="w">        </span><span class="nx">ipv6</span><span class="p">:</span>
<span class="w">          </span><span class="nx">enabled</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">          </span><span class="nx">dhcp</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">        </span><span class="nx">vlan</span><span class="p">:</span>
<span class="w">          </span><span class="kd">base</span><span class="o">-</span><span class="nx">iface</span><span class="p">:</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="nx">bond</span>
<span class="w">          </span><span class="nx">id</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span>
<span class="w">    </span><span class="nx">routes</span><span class="p">:</span>
<span class="w">      </span><span class="nx">config</span><span class="p">:</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="nx">destination</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">0.0.0.0</span><span class="o">/</span><span class="mi">0</span>
<span class="w">          </span><span class="nx">next</span><span class="o">-</span><span class="nx">hop</span><span class="o">-</span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="m m-Double">10.145.151.65</span>
<span class="w">          </span><span class="nx">next</span><span class="o">-</span><span class="nx">hop</span><span class="o">-</span><span class="kd">interface</span><span class="p">:</span><span class="w"> </span><span class="nx">infra</span><span class="o">-</span><span class="nx">bond</span><span class="m m-Double">.200</span>
<span class="w">          </span><span class="nx">table</span><span class="o">-</span><span class="nx">id</span><span class="p">:</span><span class="w"> </span><span class="mi">254</span>
<span class="w">    </span><span class="nx">dns</span><span class="o">-</span><span class="nx">resolver</span><span class="p">:</span>
<span class="w">      </span><span class="nx">config</span><span class="p">:</span>
<span class="w">        </span><span class="nx">search</span><span class="p">:</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span>
<span class="w">        </span><span class="nx">server</span><span class="p">:</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="m m-Double">5.232.32.63</span>
<span class="w">        </span><span class="o">-</span><span class="w"> </span><span class="m m-Double">10.169.69.10</span>

<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span>
</code></pre></div>

<p>3) create the BMH resource using <code>baremetalhost</code> file.</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">master</span><span class="o">-</span><span class="mi">102</span><span class="nx">_bmh_wih_secret</span><span class="p">.</span><span class="nx">yaml</span>
<span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">metal3</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">v1alpha1</span>
<span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">BareMetalHost</span>
<span class="nx">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span>
<span class="w">  </span><span class="kn">namespace</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="nx">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nx">automatedCleaningMode</span><span class="p">:</span><span class="w"> </span><span class="nx">disabled</span>
<span class="w">  </span><span class="nx">bmc</span><span class="p">:</span>
<span class="w">    </span><span class="nx">address</span><span class="p">:</span><span class="w"> </span><span class="nx">idrac</span><span class="o">-</span><span class="nx">virtualmedia</span><span class="p">:</span><span class="c1">//10.145.151.15/redfish/v1/Systems/System.Embedded.1    #this is for dell server , for HP or other vendor check virtual media path</span>
<span class="w">    </span><span class="nx">credentialsName</span><span class="p">:</span><span class="w"> </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="nx">bmc</span><span class="o">-</span><span class="nx">secret</span>
<span class="w">    </span><span class="nx">disableCertificateVerification</span><span class="p">:</span><span class="w"> </span><span class="nx">True</span>
<span class="w">  </span><span class="nx">bootMACAddress</span><span class="p">:</span><span class="w"> </span><span class="nx">c4</span><span class="p">:</span><span class="mi">70</span><span class="p">:</span><span class="nx">bd</span><span class="p">:</span><span class="nx">f9</span><span class="p">:</span><span class="mi">7</span><span class="nx">f</span><span class="p">:</span><span class="mi">48</span>
<span class="w">  </span><span class="nx">bootMode</span><span class="p">:</span><span class="w"> </span><span class="nx">UEFISecureBoot</span>
<span class="w">  </span><span class="nx">externallyProvisioned</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="nx">hardwareProfile</span><span class="p">:</span><span class="w"> </span><span class="nx">unknown</span>
<span class="w">  </span><span class="nx">online</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="nx">rootDeviceHints</span><span class="p">:</span>
<span class="w">    </span><span class="nx">deviceName</span><span class="p">:</span><span class="w"> </span><span class="o">/</span><span class="nx">dev</span><span class="o">/</span><span class="nx">disk</span><span class="o">/</span><span class="nx">by</span><span class="o">-</span><span class="nx">path</span><span class="o">/</span><span class="nx">pci</span><span class="o">-</span><span class="mi">0000</span><span class="p">:</span><span class="mi">4</span><span class="nx">a</span><span class="p">:</span><span class="m m-Double">00.0</span><span class="o">-</span><span class="nx">scsi</span><span class="o">-</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span>
<span class="w">  </span><span class="nx">userData</span><span class="p">:</span>
<span class="w">    </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span><span class="o">-</span><span class="nx">user</span><span class="o">-</span><span class="nx">data</span><span class="o">-</span><span class="nx">managed</span>
<span class="w">    </span><span class="kn">namespace</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="w">  </span><span class="nx">preprovisioningNetworkDataName</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">102</span><span class="o">-</span><span class="nx">network</span><span class="o">-</span><span class="nx">config</span><span class="o">-</span><span class="nx">secret</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span>
</code></pre></div>

<p>3.1) After creating this resource, the node will be inspected, and after a few minutes it shall be
in available state.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="n">apply</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">master_102_bmh</span><span class="p">.</span><span class="n">yaml</span>
<span class="nl">Warning</span><span class="p">:</span><span class="w"> </span><span class="n">metadata</span><span class="p">.</span><span class="nl">finalizers</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;baremetalhost.metal3.io&quot;</span><span class="err">:</span><span class="w"> </span><span class="n">prefer</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">domain</span><span class="o">-</span><span class="n">qualified</span><span class="w"> </span><span class="n">finalizer</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">avoid</span><span class="w"> </span><span class="n">accidental</span><span class="w"> </span><span class="n">conflicts</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">finalizer</span><span class="w"> </span><span class="n">writers</span>
<span class="n">baremetalhost</span><span class="p">.</span><span class="n">metal3</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w"> </span><span class="n">created</span>
</code></pre></div>

<p>3.2) the node status should change from registering -&gt; inspecting -&gt; available. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">bmh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="k">STATE</span><span class="w">          </span><span class="n">CONSUMER</span><span class="w">                    </span><span class="n">ONLINE</span><span class="w">   </span><span class="n">ERROR</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">available</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">31</span><span class="n">m</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<blockquote>
<p>Once the BMH is in available state, the machine CR can be created. The same shall be created which was done in chapter 1.3.</p>
</blockquote>
<p>6) create and apply the machines.yaml </p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">cat</span><span class="w"> </span><span class="nx">backup_machinemaster</span><span class="o">-</span><span class="mi">102</span><span class="nx">_editted</span><span class="p">.</span><span class="nx">yaml</span>
<span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">v1beta1</span>
<span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">Machine</span>
<span class="nx">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nx">labels</span><span class="p">:</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">cluster</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="nx">role</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span>
<span class="w">    </span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="o">-</span><span class="kn">api</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="k">type</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span>
<span class="w">  </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">1</span>
<span class="w">  </span><span class="kn">namespace</span><span class="p">:</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="nx">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nx">lifecycleHooks</span><span class="p">:</span>
<span class="w">    </span><span class="nx">preDrain</span><span class="p">:</span>
<span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">EtcdQuorumOperator</span>
<span class="w">      </span><span class="nx">owner</span><span class="p">:</span><span class="w"> </span><span class="nx">clusteroperator</span><span class="o">/</span><span class="nx">etcd</span>
<span class="w">  </span><span class="nx">metadata</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="nx">providerSpec</span><span class="p">:</span>
<span class="w">    </span><span class="nx">value</span><span class="p">:</span>
<span class="w">      </span><span class="nx">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="nx">baremetal</span><span class="p">.</span><span class="nx">cluster</span><span class="p">.</span><span class="nx">k8s</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">v1alpha1</span>
<span class="w">      </span><span class="nx">customDeploy</span><span class="p">:</span>
<span class="w">        </span><span class="nx">method</span><span class="p">:</span><span class="w"> </span><span class="nx">install_coreos</span>
<span class="w">      </span><span class="nx">hostSelector</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="w">      </span><span class="nx">image</span><span class="p">:</span>
<span class="w">        </span><span class="nx">checksum</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">        </span><span class="nx">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">      </span><span class="nx">kind</span><span class="p">:</span><span class="w"> </span><span class="nx">BareMetalMachineProviderSpec</span>
<span class="w">      </span><span class="nx">metadata</span><span class="p">:</span>
<span class="w">        </span><span class="nx">creationTimestamp</span><span class="p">:</span><span class="w"> </span><span class="nx">null</span>
<span class="w">      </span><span class="nx">userData</span><span class="p">:</span>
<span class="w">        </span><span class="nx">name</span><span class="p">:</span><span class="w"> </span><span class="nx">master</span><span class="o">-</span><span class="nx">user</span><span class="o">-</span><span class="nx">data</span><span class="o">-</span><span class="nx">managed</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span>

<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">apply</span><span class="w"> </span><span class="o">-</span><span class="nx">f</span><span class="w"> </span><span class="nx">backup_machinemaster</span><span class="o">-</span><span class="mi">102</span><span class="nx">_editted</span><span class="p">.</span><span class="nx">yaml</span>
<span class="nx">Warning</span><span class="p">:</span><span class="w"> </span><span class="nx">metadata</span><span class="p">.</span><span class="nx">finalizers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;machine.machine.openshift.io&quot;</span><span class="p">:</span><span class="w"> </span><span class="nx">prefer</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="nx">domain</span><span class="o">-</span><span class="nx">qualified</span><span class="w"> </span><span class="nx">finalizer</span><span class="w"> </span><span class="nx">name</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">avoid</span><span class="w"> </span><span class="nx">accidental</span><span class="w"> </span><span class="nx">conflicts</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">other</span><span class="w"> </span><span class="nx">finalizer</span><span class="w"> </span><span class="nx">writers</span>
<span class="nx">machine</span><span class="p">.</span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="nx">created</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span>

<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">machines</span><span class="p">.</span><span class="nx">machine</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="kn">api</span>
<span class="nx">NAME</span><span class="w">                              </span><span class="nx">PHASE</span><span class="w">          </span><span class="nx">TYPE</span><span class="w">   </span><span class="nx">REGION</span><span class="w">   </span><span class="nx">ZONE</span><span class="w">   </span><span class="nx">AGE</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="nx">Running</span><span class="w">                               </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="nx">Provisioning</span><span class="w">                          </span><span class="mi">4</span><span class="nx">m17s</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="nx">Running</span><span class="w">                               </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="nx">mlq8w</span><span class="w">   </span><span class="nx">Running</span><span class="w">                               </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">b6cjs</span><span class="o">-</span><span class="nx">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="nx">x5dc5</span><span class="w">   </span><span class="nx">Running</span><span class="w">                               </span><span class="mi">74</span><span class="nx">d</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span>
</code></pre></div>

<p>7) Monitor the status of bmh, will change to provisioning</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">bmh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="k">STATE</span><span class="w">          </span><span class="n">CONSUMER</span><span class="w">                          </span><span class="n">ONLINE</span><span class="w">   </span><span class="n">ERROR</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">provisioning</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">31</span><span class="n">m</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">unmanaged</span><span class="w">      </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>

<span class="n">#nodes</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span>

<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">nodes</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">worker</span><span class="w">           </span><span class="mi">80</span><span class="n">s</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>

<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">15</span><span class="n">m</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">bmh</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="k">STATE</span><span class="w">         </span><span class="n">CONSUMER</span><span class="w">                    </span><span class="n">ONLINE</span><span class="w">   </span><span class="n">ERROR</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">provisioned</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">   </span><span class="k">true</span><span class="w">             </span><span class="mi">44</span><span class="n">m</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<p>8) At last node successfully added back to the cluster here. </p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">no</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">                                                                                                            </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">no</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">                                                                                                            </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">worker</span><span class="w">           </span><span class="mi">54</span><span class="n">s</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">                                                                                                            </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">apioc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="o">^</span><span class="n">C</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">machines</span><span class="p">.</span><span class="n">machine</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">api</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">PHASE</span><span class="w">     </span><span class="n">TYPE</span><span class="w">   </span><span class="n">REGION</span><span class="w">   </span><span class="k">ZONE</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">0</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">1</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">15</span><span class="n">m</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="mi">2</span><span class="w">         </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">mlq8w</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">b6cjs</span><span class="o">-</span><span class="n">worker</span><span class="o">-</span><span class="mi">0</span><span class="o">-</span><span class="n">x5dc5</span><span class="w">   </span><span class="n">Running</span><span class="w">                          </span><span class="mi">74</span><span class="n">d</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">no</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">    </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">    </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">worker</span><span class="w">           </span><span class="mi">110</span><span class="n">s</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">    </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">    </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">    </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h3 id="verifying-etcd">Verifying etcd<a class="headerlink" href="#verifying-etcd" title="Permanent link">&para;</a></h3>
<p>1) Verify the etcd-guard-<nodename> and etcd-<nodename> pods are started and all containers of it are in running state in the openshift-etcd namespace.</p>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">no</span>
<span class="nx">NAME</span><span class="w">                                               </span><span class="nx">STATUS</span><span class="w">   </span><span class="nx">ROLES</span><span class="w">                                 </span><span class="nx">AGE</span><span class="w">    </span><span class="nx">VERSION</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">    </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">worker</span><span class="w">           </span><span class="mi">110</span><span class="nx">s</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">103</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">    </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">    </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">    </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">master</span><span class="p">=</span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">health</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.94:2379 is healthy: successfully committed proposal: took = 7.570208ms</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.92:2379 is healthy: successfully committed proposal: took = 7.468077ms</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">member</span><span class="w"> </span><span class="nx">list</span><span class="w"> </span><span class="o">-</span><span class="nx">w</span><span class="w"> </span><span class="nx">table</span>
<span class="o">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="o">|</span><span class="w">        </span><span class="nx">ID</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nx">STATUS</span><span class="w">  </span><span class="o">|</span><span class="w">                       </span><span class="nx">NAME</span><span class="w">                       </span><span class="o">|</span><span class="w">         </span><span class="nx">PEER</span><span class="w"> </span><span class="nx">ADDRS</span><span class="w">         </span><span class="o">|</span><span class="w">        </span><span class="nx">CLIENT</span><span class="w"> </span><span class="nx">ADDRS</span><span class="w">        </span><span class="o">|</span><span class="w"> </span><span class="nx">IS</span><span class="w"> </span><span class="nx">LEARNER</span><span class="w"> </span><span class="o">|</span>
<span class="o">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="o">|</span><span class="w"> </span><span class="mi">44</span><span class="nx">ad9888985e068c</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">started</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.92:2380 | https://10.145.151.92:2379 |      false |</span>
<span class="o">|</span><span class="w"> </span><span class="mi">55</span><span class="nx">fcb74f654c5538</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">started</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.93:2380 | https://10.145.151.93:2379 |      false |</span>
<span class="o">|</span><span class="w"> </span><span class="nx">f26d12a58d17e571</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">started</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">103</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.94:2380 | https://10.145.151.94:2379 |      false |</span>
<span class="o">+------------------+---------+--------------------------------------------------+----------------------------+----------------------------+------------+</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">health</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.94:2379 is healthy: successfully committed proposal: took = 6.734404ms</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.92:2379 is healthy: successfully committed proposal: took = 7.079121ms</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">no</span>
<span class="nx">NAME</span><span class="w">                                               </span><span class="nx">STATUS</span><span class="w">   </span><span class="nx">ROLES</span><span class="w">                                 </span><span class="nx">AGE</span><span class="w">     </span><span class="nx">VERSION</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">worker</span><span class="w">           </span><span class="mi">3</span><span class="nx">m55s</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">103</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">mcp</span>
<span class="nx">NAME</span><span class="w">     </span><span class="nx">CONFIG</span><span class="w">                                             </span><span class="nx">UPDATED</span><span class="w">   </span><span class="nx">UPDATING</span><span class="w">   </span><span class="nx">DEGRADED</span><span class="w">   </span><span class="nx">MACHINECOUNT</span><span class="w">   </span><span class="nx">READYMACHINECOUNT</span><span class="w">   </span><span class="nx">UPDATEDMACHINECOUNT</span><span class="w">   </span><span class="nx">DEGRADEDMACHINECOUNT</span><span class="w">   </span><span class="nx">AGE</span>
<span class="nx">master</span><span class="w">   </span><span class="nx">rendered</span><span class="o">-</span><span class="nx">master</span><span class="o">-</span><span class="nx">d234bb112f0765116acd91ac75545416</span><span class="w">   </span><span class="nx">True</span><span class="w">      </span><span class="nx">False</span><span class="w">      </span><span class="nx">False</span><span class="w">      </span><span class="mi">3</span><span class="w">              </span><span class="mi">3</span><span class="w">                   </span><span class="mi">3</span><span class="w">                     </span><span class="mi">0</span><span class="w">                      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">worker</span><span class="w">   </span><span class="nx">rendered</span><span class="o">-</span><span class="nx">worker</span><span class="o">-</span><span class="mi">3</span><span class="nx">e1f74a73d4a683cfbf22ced0aa2792a</span><span class="w">   </span><span class="nx">False</span><span class="w">     </span><span class="nx">True</span><span class="w">       </span><span class="nx">True</span><span class="w">       </span><span class="mi">2</span><span class="w">              </span><span class="mi">1</span><span class="w">                   </span><span class="mi">1</span><span class="w">                     </span><span class="mi">1</span><span class="w">                      </span><span class="mi">74</span><span class="nx">d</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">health</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.92:2379 is healthy: successfully committed proposal: took = 6.241732ms</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.94:2379 is healthy: successfully committed proposal: took = 6.383176ms</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">health</span>
<span class="nx">error</span><span class="p">:</span><span class="w"> </span><span class="nx">unable</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">upgrade</span><span class="w"> </span><span class="nx">connection</span><span class="p">:</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;etcd&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">health</span>
<span class="nx">error</span><span class="p">:</span><span class="w"> </span><span class="nx">unable</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">upgrade</span><span class="w"> </span><span class="nx">connection</span><span class="p">:</span><span class="w"> </span><span class="nx">container</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;etcd&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">no</span>
<span class="nx">NAME</span><span class="w">                                               </span><span class="nx">STATUS</span><span class="w">   </span><span class="nx">ROLES</span><span class="w">                                 </span><span class="nx">AGE</span><span class="w">     </span><span class="nx">VERSION</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">worker</span><span class="w">           </span><span class="mi">5</span><span class="nx">m51s</span><span class="w">   </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubmaster</span><span class="o">-</span><span class="mi">103</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="p">,</span><span class="nx">master</span><span class="p">,</span><span class="nx">monitor</span><span class="p">,</span><span class="nx">worker</span><span class="w">   </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">101</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="nx">ncpvblvhub</span><span class="o">-</span><span class="nx">hubworker</span><span class="o">-</span><span class="mi">102</span><span class="p">.</span><span class="nx">ncpvblvhub</span><span class="p">.</span><span class="nx">t</span><span class="o">-</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">lab</span><span class="w">   </span><span class="nx">Ready</span><span class="w">    </span><span class="nx">gateway</span><span class="p">,</span><span class="nx">worker</span><span class="w">                        </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">v1</span><span class="m m-Double">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="nx">d3387</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">health</span>

<span class="p">{</span><span class="s">&quot;level&quot;</span><span class="p">:</span><span class="s">&quot;warn&quot;</span><span class="p">,</span><span class="s">&quot;ts&quot;</span><span class="p">:</span><span class="s">&quot;2025-05-27T21:24:52.680683Z&quot;</span><span class="p">,</span><span class="s">&quot;logger&quot;</span><span class="p">:</span><span class="s">&quot;client&quot;</span><span class="p">,</span><span class="s">&quot;caller&quot;</span><span class="p">:</span><span class="s">&quot;v3@v3.5.14/retry_interceptor.go:63&quot;</span><span class="p">,</span><span class="s">&quot;msg&quot;</span><span class="p">:</span><span class="s">&quot;retrying of unary invoker failed&quot;</span><span class="p">,</span><span class="s">&quot;target&quot;</span><span class="p">:</span><span class="s">&quot;etcd-endpoints://0xc00022e000/10.145.151.92:2379&quot;</span><span class="p">,</span><span class="s">&quot;attempt&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;error&quot;</span><span class="p">:</span><span class="s">&quot;rpc error: code = DeadlineExceeded desc = latest balancer error: last connection error: connection error: desc = \&quot;transport: Error while dialing: dial tcp 10.145.151.92:2379: connect: connection refused\&quot;&quot;</span><span class="p">}</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.93:2379 is healthy: successfully committed proposal: took = 6.311573ms</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.94:2379 is healthy: successfully committed proposal: took = 8.305729ms</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.92:2379 is unhealthy: failed to commit proposal: context deadline exceeded</span>
<span class="nx">Error</span><span class="p">:</span><span class="w"> </span><span class="nx">unhealthy</span><span class="w"> </span><span class="nx">cluster</span>
<span class="nx">command</span><span class="w"> </span><span class="nx">terminated</span><span class="w"> </span><span class="nx">with</span><span class="w"> </span><span class="nx">exit</span><span class="w"> </span><span class="nx">code</span><span class="w"> </span><span class="mi">1</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">co</span>
<span class="nx">NAME</span><span class="w">                                       </span><span class="nx">VERSION</span><span class="w">   </span><span class="nx">AVAILABLE</span><span class="w">   </span><span class="nx">PROGRESSING</span><span class="w">   </span><span class="nx">DEGRADED</span><span class="w">   </span><span class="nx">SINCE</span><span class="w">   </span><span class="nx">MESSAGE</span>
<span class="nx">authentication</span><span class="w">                             </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">3</span><span class="nx">h48m</span>
<span class="nx">baremetal</span><span class="w">                                  </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">cloud</span><span class="o">-</span><span class="nx">controller</span><span class="o">-</span><span class="nx">manager</span><span class="w">                   </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">cloud</span><span class="o">-</span><span class="nx">credential</span><span class="w">                           </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">cluster</span><span class="o">-</span><span class="nx">autoscaler</span><span class="w">                         </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">config</span><span class="o">-</span><span class="nx">operator</span><span class="w">                            </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">console</span><span class="w">                                    </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">control</span><span class="o">-</span><span class="nx">plane</span><span class="o">-</span><span class="nx">machine</span><span class="o">-</span><span class="nx">set</span><span class="w">                  </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">csi</span><span class="o">-</span><span class="nx">snapshot</span><span class="o">-</span><span class="nx">controller</span><span class="w">                    </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">dns</span><span class="w">                                        </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">etcd</span><span class="w">                                       </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">True</span><span class="w">          </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">NodeInstallerProgressing</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nx">node</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">revision</span><span class="w"> </span><span class="mi">15</span><span class="p">;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nx">nodes</span><span class="w"> </span><span class="nx">are</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">revision</span><span class="w"> </span><span class="mi">17</span>
<span class="nx">image</span><span class="o">-</span><span class="nx">registry</span><span class="w">                             </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">ingress</span><span class="w">                                    </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">insights</span><span class="w">                                   </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">kube</span><span class="o">-</span><span class="nx">apiserver</span><span class="w">                             </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">True</span><span class="w">          </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">NodeInstallerProgressing</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nx">nodes</span><span class="w"> </span><span class="nx">are</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">revision</span><span class="w"> </span><span class="mi">60</span><span class="p">;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nx">node</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">revision</span><span class="w"> </span><span class="mi">61</span>
<span class="nx">kube</span><span class="o">-</span><span class="nx">controller</span><span class="o">-</span><span class="nx">manager</span><span class="w">                    </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">kube</span><span class="o">-</span><span class="nx">scheduler</span><span class="w">                             </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">kube</span><span class="o">-</span><span class="nx">storage</span><span class="o">-</span><span class="nx">version</span><span class="o">-</span><span class="nx">migrator</span><span class="w">              </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">13</span><span class="nx">d</span>
<span class="nx">machine</span><span class="o">-</span><span class="kn">api</span><span class="w">                                </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">machine</span><span class="o">-</span><span class="nx">approver</span><span class="w">                           </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">machine</span><span class="o">-</span><span class="nx">config</span><span class="w">                             </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">True</span><span class="w">       </span><span class="mi">74</span><span class="nx">d</span><span class="w">     </span><span class="nx">Failed</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">resync</span><span class="w"> </span><span class="m m-Double">4.16.24</span><span class="w"> </span><span class="nx">because</span><span class="p">:</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="nx">during</span><span class="w"> </span><span class="nx">syncRequiredMachineConfigPools</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nx">context</span><span class="w"> </span><span class="nx">deadline</span><span class="w"> </span><span class="nx">exceeded</span><span class="p">,</span><span class="w"> </span><span class="nx">failed</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">update</span><span class="w"> </span><span class="nx">clusteroperator</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="nx">client</span><span class="w"> </span><span class="nx">rate</span><span class="w"> </span><span class="nx">limiter</span><span class="w"> </span><span class="nx">Wait</span><span class="w"> </span><span class="k">returned</span><span class="w"> </span><span class="nx">an</span><span class="w"> </span><span class="nx">error</span><span class="p">:</span><span class="w"> </span><span class="nx">context</span><span class="w"> </span><span class="nx">deadline</span><span class="w"> </span><span class="nx">exceeded</span><span class="p">,</span><span class="w"> </span><span class="nx">error</span><span class="w"> </span><span class="nx">MachineConfigPool</span><span class="w"> </span><span class="nx">worker</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="nx">ready</span><span class="p">,</span><span class="w"> </span><span class="nx">retrying</span><span class="p">.</span><span class="w"> </span><span class="nx">Status</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="nx">pool</span><span class="w"> </span><span class="nx">degraded</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="nx">total</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nx">ready</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">updated</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nx">unavailable</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)]]</span>
<span class="nx">marketplace</span><span class="w">                                </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">monitoring</span><span class="w">                                 </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">Unknown</span><span class="w">     </span><span class="nx">True</span><span class="w">          </span><span class="nx">Unknown</span><span class="w">    </span><span class="mi">35</span><span class="nx">m</span><span class="w">     </span><span class="nx">Rolling</span><span class="w"> </span><span class="nx">out</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">stack</span><span class="p">.</span>
<span class="nx">network</span><span class="w">                                    </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">node</span><span class="o">-</span><span class="nx">tuning</span><span class="w">                                </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">6</span><span class="nx">m20s</span>
<span class="nx">openshift</span><span class="o">-</span><span class="nx">apiserver</span><span class="w">                        </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">4</span><span class="nx">h17m</span>
<span class="nx">openshift</span><span class="o">-</span><span class="nx">controller</span><span class="o">-</span><span class="nx">manager</span><span class="w">               </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">openshift</span><span class="o">-</span><span class="nx">samples</span><span class="w">                          </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">operator</span><span class="o">-</span><span class="nx">lifecycle</span><span class="o">-</span><span class="nx">manager</span><span class="w">                 </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">operator</span><span class="o">-</span><span class="nx">lifecycle</span><span class="o">-</span><span class="nx">manager</span><span class="o">-</span><span class="nx">catalog</span><span class="w">         </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">operator</span><span class="o">-</span><span class="nx">lifecycle</span><span class="o">-</span><span class="nx">manager</span><span class="o">-</span><span class="nx">packageserver</span><span class="w">   </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">service</span><span class="o">-</span><span class="nx">ca</span><span class="w">                                 </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>
<span class="nx">storage</span><span class="w">                                    </span><span class="m m-Double">4.16.24</span><span class="w">   </span><span class="nx">True</span><span class="w">        </span><span class="nx">False</span><span class="w">         </span><span class="nx">False</span><span class="w">      </span><span class="mi">74</span><span class="nx">d</span>

<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">watch</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">co</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">exec</span><span class="w"> </span><span class="o">-</span><span class="nx">it</span><span class="w"> </span><span class="err">$</span><span class="p">(</span><span class="nx">oc</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="nx">pods</span><span class="w"> </span><span class="o">-</span><span class="nx">l</span><span class="w"> </span><span class="nx">k8s</span><span class="o">-</span><span class="nx">app</span><span class="p">=</span><span class="nx">etcd</span><span class="w"> </span><span class="o">-</span><span class="nx">o</span><span class="w"> </span><span class="nx">wide</span><span class="w"> </span><span class="o">--</span><span class="nx">no</span><span class="o">-</span><span class="nx">headers</span><span class="w"> </span><span class="o">|</span><span class="nx">grep</span><span class="w"> </span><span class="o">-</span><span class="nx">v</span><span class="w"> </span><span class="err">$</span><span class="nx">master</span><span class="o">|</span><span class="nx">head</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="mi">1</span><span class="o">|</span><span class="nx">awk</span><span class="w"> </span><span class="p">{</span><span class="err">&#39;</span><span class="nx">print</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span><span class="err">&#39;</span><span class="p">})</span><span class="w"> </span><span class="o">-</span><span class="nx">n</span><span class="w"> </span><span class="nx">openshift</span><span class="o">-</span><span class="nx">etcd</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="nx">etcdctl</span><span class="w"> </span><span class="nx">endpoint</span><span class="w"> </span><span class="nx">health</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.93:2379 is healthy: successfully committed proposal: took = 6.998079ms</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.92:2379 is healthy: successfully committed proposal: took = 7.999787ms</span>
<span class="nx">https</span><span class="p">:</span><span class="c1">//10.145.151.94:2379 is healthy: successfully committed proposal: took = 7.997677ms</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span><span class="nx">oc</span><span class="w"> </span><span class="nx">patch</span><span class="w"> </span><span class="nx">etcd</span><span class="o">/</span><span class="nx">cluster</span><span class="w"> </span><span class="o">--</span><span class="k">type</span><span class="p">=</span><span class="nx">merge</span><span class="w"> </span><span class="o">-</span><span class="nx">p</span><span class="w"> </span><span class="err">&#39;</span><span class="p">{</span><span class="s">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;unsupportedConfigOverrides&quot;</span><span class="p">:</span><span class="w"> </span><span class="nx">null</span><span class="p">}}</span><span class="err">&#39;</span>
<span class="nx">etcd</span><span class="p">.</span><span class="nx">operator</span><span class="p">.</span><span class="nx">openshift</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">cluster</span><span class="w"> </span><span class="nx">patched</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">dom16hub101</span><span class="o">-</span><span class="nx">infra</span><span class="o">-</span><span class="nx">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="err">#</span><span class="w"> </span>
</code></pre></div>

<h3 id="adding-back-the-osds">Adding back the OSDs<a class="headerlink" href="#adding-back-the-osds" title="Permanent link">&para;</a></h3>
<p>1) The OSDs are automatically added, after the PVs are created by the Local Storage Operator.</p>
<p>2) After adding the labels back to the node (which was applied initially during the deployment) including the <code>cluster.ocs.openshift.io/openshift-storage</code>, the Local Storage Operator’s two daemonsets pods will be scheduled on this node as well, namely the
diskmaker discovery and the diskmaker manager. </p>
<p>3) The discovery will inspect the node for available disks while the manager will create the PVs which will be used by ODF.</p>
<p>oc get pods -n openshift-local-storage -o wide</p>
<p>4) After the new PVs are created the new OSDs deployments will be recreated and OSD pods and mon pod will start automatically.</p>
<p>5) If those would not start automatically for some reason, the rook-ceph-operator pod shall be restarted.</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="n">#oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">pods</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">openshift</span><span class="o">-</span><span class="k">local</span><span class="o">-</span><span class="n">storage</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">wide</span>
<span class="n">NAME</span><span class="w">                                      </span><span class="n">READY</span><span class="w">   </span><span class="n">STATUS</span><span class="w">    </span><span class="n">RESTARTS</span><span class="w">        </span><span class="n">AGE</span><span class="w">   </span><span class="n">IP</span><span class="w">             </span><span class="n">NODE</span><span class="w">                                               </span><span class="n">NOMINATED</span><span class="w"> </span><span class="n">NODE</span><span class="w">   </span><span class="n">READINESS</span><span class="w"> </span><span class="n">GATES</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">discovery</span><span class="o">-</span><span class="mi">6</span><span class="n">mcrl</span><span class="w">                 </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">4</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20.0.163</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">discovery</span><span class="o">-</span><span class="mi">9</span><span class="n">htrb</span><span class="w">                 </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">6</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20.2.141</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">fbzkp</span><span class="w">                   </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">4</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20.0.164</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">h6r2t</span><span class="w">                   </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">6</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20.2.142</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="k">local</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">operator</span><span class="o">-</span><span class="mi">6</span><span class="n">d968c9989</span><span class="o">-</span><span class="n">w4vp4</span><span class="w">   </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">h42m</span><span class="w"> </span><span class="n">ago</span><span class="p">)</span><span class="w">   </span><span class="mi">56</span><span class="n">d</span><span class="w">   </span><span class="mf">172.23.0.66</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="k">none</span><span class="o">&gt;</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w">  </span><span class="n">cluster</span><span class="p">.</span><span class="n">ocs</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">no</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">worker</span><span class="w">           </span><span class="mi">13</span><span class="n">m</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w"> </span><span class="n">cluster</span><span class="p">.</span><span class="n">ocs</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="o">=</span>
<span class="n">node</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w"> </span><span class="n">labeled</span>
<span class="o">[</span><span class="n">root@dom16hub101-infra-manager ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w">  </span><span class="n">cluster</span><span class="p">.</span><span class="n">ocs</span><span class="p">.</span><span class="n">openshift</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">worker</span><span class="w">           </span><span class="mi">15</span><span class="n">m</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="p">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="p">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="mf">.29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
</code></pre></div>

<blockquote>
<p>After the new PVs are created the new OSDs deployments will be recreated and OSD pods and mon pod will start automatically. If those would not start automatically for some reason, the rook-ceph-operator pod shall be restarted.</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get pods -n openshift-local-storage -o wide</span>
<span class="n">NAME</span><span class="w">                                      </span><span class="n">READY</span><span class="w">   </span><span class="n">STATUS</span><span class="w">    </span><span class="n">RESTARTS</span><span class="w">        </span><span class="n">AGE</span><span class="w">   </span><span class="n">IP</span><span class="w">             </span><span class="n">NODE</span><span class="w">                                               </span><span class="n">NOMINATED</span><span class="w"> </span><span class="n">NODE</span><span class="w">   </span><span class="n">READINESS</span><span class="w"> </span><span class="n">GATES</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">discovery</span><span class="o">-</span><span class="mi">6</span><span class="n">mcrl</span><span class="w">                 </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">4</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20</span><span class="o">.</span><span class="mf">0.163</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">discovery</span><span class="o">-</span><span class="mi">9</span><span class="n">htrb</span><span class="w">                 </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">6</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20</span><span class="o">.</span><span class="mf">2.141</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">discovery</span><span class="o">-</span><span class="n">b6bxh</span><span class="w">                 </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">               </span><span class="mi">26</span><span class="n">s</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.33</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="mi">8</span><span class="n">kpkt</span><span class="w">                   </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">0</span><span class="w">               </span><span class="mi">26</span><span class="n">s</span><span class="w">   </span><span class="mf">172.21</span><span class="o">.</span><span class="mf">0.31</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">fbzkp</span><span class="w">                   </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">4</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20</span><span class="o">.</span><span class="mf">0.164</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">diskmaker</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">h6r2t</span><span class="w">                   </span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">6</span><span class="w">               </span><span class="mi">71</span><span class="n">d</span><span class="w">   </span><span class="mf">172.20</span><span class="o">.</span><span class="mf">2.142</span><span class="w">   </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="n">local</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">operator</span><span class="o">-</span><span class="mi">6</span><span class="n">d968c9989</span><span class="o">-</span><span class="n">w4vp4</span><span class="w">   </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w">     </span><span class="n">Running</span><span class="w">   </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">h46m</span><span class="w"> </span><span class="n">ago</span><span class="p">)</span><span class="w">   </span><span class="mi">57</span><span class="n">d</span><span class="w">   </span><span class="mf">172.23</span><span class="o">.</span><span class="mf">0.66</span><span class="w">    </span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span><span class="w">           </span><span class="o">&lt;</span><span class="n">none</span><span class="o">&gt;</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get co</span>
<span class="n">NAME</span><span class="w">                                       </span><span class="n">VERSION</span><span class="w">   </span><span class="n">AVAILABLE</span><span class="w">   </span><span class="n">PROGRESSING</span><span class="w">   </span><span class="n">DEGRADED</span><span class="w">   </span><span class="n">SINCE</span><span class="w">   </span><span class="n">MESSAGE</span>
<span class="n">authentication</span><span class="w">                             </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">3</span><span class="n">h57m</span>
<span class="n">baremetal</span><span class="w">                                  </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">cloud</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="w">                   </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">cloud</span><span class="o">-</span><span class="n">credential</span><span class="w">                           </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">cluster</span><span class="o">-</span><span class="n">autoscaler</span><span class="w">                         </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">config</span><span class="o">-</span><span class="n">operator</span><span class="w">                            </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">console</span><span class="w">                                    </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="o">-</span><span class="n">machine</span><span class="o">-</span><span class="n">set</span><span class="w">                  </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">csi</span><span class="o">-</span><span class="n">snapshot</span><span class="o">-</span><span class="n">controller</span><span class="w">                    </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">dns</span><span class="w">                                        </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">etcd</span><span class="w">                                       </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">image</span><span class="o">-</span><span class="n">registry</span><span class="w">                             </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">ingress</span><span class="w">                                    </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">insights</span><span class="w">                                   </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">kube</span><span class="o">-</span><span class="n">apiserver</span><span class="w">                             </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">kube</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="w">                    </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">kube</span><span class="o">-</span><span class="n">scheduler</span><span class="w">                             </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">kube</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">version</span><span class="o">-</span><span class="n">migrator</span><span class="w">              </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">13</span><span class="n">d</span>
<span class="n">machine</span><span class="o">-</span><span class="n">api</span><span class="w">                                </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">machine</span><span class="o">-</span><span class="n">approver</span><span class="w">                           </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">machine</span><span class="o">-</span><span class="n">config</span><span class="w">                             </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">True</span><span class="w">       </span><span class="mi">74</span><span class="n">d</span><span class="w">     </span><span class="n">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">resync</span><span class="w"> </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w"> </span><span class="n">because</span><span class="p">:</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">during</span><span class="w"> </span><span class="n">syncRequiredMachineConfigPools</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">context</span><span class="w"> </span><span class="n">deadline</span><span class="w"> </span><span class="n">exceeded</span><span class="p">,</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">update</span><span class="w"> </span><span class="n">clusteroperator</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">client</span><span class="w"> </span><span class="n">rate</span><span class="w"> </span><span class="n">limiter</span><span class="w"> </span><span class="n">Wait</span><span class="w"> </span><span class="n">returned</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">deadline</span><span class="w"> </span><span class="n">exceeded</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">MachineConfigPool</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">ready</span><span class="p">,</span><span class="w"> </span><span class="n">retrying</span><span class="o">.</span><span class="w"> </span><span class="n">Status</span><span class="p">:</span><span class="w"> </span><span class="p">(</span><span class="n">pool</span><span class="w"> </span><span class="n">degraded</span><span class="p">:</span><span class="w"> </span><span class="bp">true</span><span class="w"> </span><span class="n">total</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">ready</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">updated</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">unavailable</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">)]]</span>
<span class="n">marketplace</span><span class="w">                                </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">monitoring</span><span class="w">                                 </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">Unknown</span><span class="w">     </span><span class="n">True</span><span class="w">          </span><span class="n">Unknown</span><span class="w">    </span><span class="mi">45</span><span class="n">m</span><span class="w">     </span><span class="n">Rolling</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span><span class="o">.</span>
<span class="n">network</span><span class="w">                                    </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">node</span><span class="o">-</span><span class="n">tuning</span><span class="w">                                </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">15</span><span class="n">m</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">apiserver</span><span class="w">                        </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">4</span><span class="n">h26m</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span><span class="w">               </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">openshift</span><span class="o">-</span><span class="n">samples</span><span class="w">                          </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">operator</span><span class="o">-</span><span class="n">lifecycle</span><span class="o">-</span><span class="n">manager</span><span class="w">                 </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">operator</span><span class="o">-</span><span class="n">lifecycle</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">catalog</span><span class="w">         </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">operator</span><span class="o">-</span><span class="n">lifecycle</span><span class="o">-</span><span class="n">manager</span><span class="o">-</span><span class="n">packageserver</span><span class="w">   </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">service</span><span class="o">-</span><span class="n">ca</span><span class="w">                                 </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>
<span class="n">storage</span><span class="w">                                    </span><span class="mf">4.16</span><span class="o">.</span><span class="mi">24</span><span class="w">   </span><span class="n">True</span><span class="w">        </span><span class="n">False</span><span class="w">         </span><span class="n">False</span><span class="w">      </span><span class="mi">74</span><span class="n">d</span>

<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc exec -it $(oc get pod -n openshift-storage -l app=rook-ceph-operator -o name) -n openshift-storage -- ceph status -c /var/lib/rook/openshift-storage/openshift-storage.config</span>
<span class="w">  </span><span class="n">cluster</span><span class="p">:</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w">     </span><span class="mi">27</span><span class="n">b507a3</span><span class="o">-</span><span class="n">b496</span><span class="o">-</span><span class="mi">4549</span><span class="o">-</span><span class="mi">9271</span><span class="o">-</span><span class="n">a3bc0705dd13</span>
<span class="w">    </span><span class="n">health</span><span class="p">:</span><span class="w"> </span><span class="n">HEALTH_WARN</span>
<span class="w">            </span><span class="n">Degraded</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">redundancy</span><span class="p">:</span><span class="w"> </span><span class="mi">87816</span><span class="o">/</span><span class="mi">433023</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">degraded</span><span class="w"> </span><span class="p">(</span><span class="mf">20.280</span><span class="o">%</span><span class="p">),</span><span class="w"> </span><span class="mi">68</span><span class="w"> </span><span class="n">pgs</span><span class="w"> </span><span class="n">degraded</span><span class="p">,</span><span class="w"> </span><span class="mi">74</span><span class="w"> </span><span class="n">pgs</span><span class="w"> </span><span class="n">undersized</span>

<span class="w">  </span><span class="n">services</span><span class="p">:</span>
<span class="w">    </span><span class="n">mon</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">daemons</span><span class="p">,</span><span class="w"> </span><span class="n">quorum</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">e</span><span class="w"> </span><span class="p">(</span><span class="n">age</span><span class="w"> </span><span class="mi">3</span><span class="n">m</span><span class="p">)</span>
<span class="w">    </span><span class="n">mgr</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="p">(</span><span class="n">active</span><span class="p">,</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">3</span><span class="n">h</span><span class="p">),</span><span class="w"> </span><span class="n">standbys</span><span class="p">:</span><span class="w"> </span><span class="n">a</span>
<span class="w">    </span><span class="n">mds</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">daemons</span><span class="w"> </span><span class="n">up</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">hot</span><span class="w"> </span><span class="n">standby</span>
<span class="w">    </span><span class="n">osd</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">osds</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="mi">112</span><span class="n">s</span><span class="p">),</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="mi">2</span><span class="n">m</span><span class="p">);</span><span class="w"> </span><span class="mi">109</span><span class="w"> </span><span class="n">remapped</span><span class="w"> </span><span class="n">pgs</span>
<span class="w">    </span><span class="n">rgw</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">daemon</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">hosts</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">zones</span><span class="p">)</span>

<span class="w">  </span><span class="n">data</span><span class="p">:</span>
<span class="w">    </span><span class="n">volumes</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">healthy</span>
<span class="w">    </span><span class="n">pools</span><span class="p">:</span><span class="w">   </span><span class="mi">12</span><span class="w"> </span><span class="n">pools</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="w"> </span><span class="n">pgs</span>
<span class="w">    </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mf">144.34</span><span class="n">k</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="mi">541</span><span class="w"> </span><span class="n">GiB</span>
<span class="w">    </span><span class="n">usage</span><span class="p">:</span><span class="w">   </span><span class="mf">1.2</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">21</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="n">avail</span>
<span class="w">    </span><span class="n">pgs</span><span class="p">:</span><span class="w">     </span><span class="mf">0.498</span><span class="o">%</span><span class="w"> </span><span class="n">pgs</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">active</span>
<span class="w">             </span><span class="mi">87816</span><span class="o">/</span><span class="mi">433023</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">degraded</span><span class="w"> </span><span class="p">(</span><span class="mf">20.280</span><span class="o">%</span><span class="p">)</span>
<span class="w">             </span><span class="mi">55928</span><span class="o">/</span><span class="mi">433023</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">misplaced</span><span class="w"> </span><span class="p">(</span><span class="mf">12.916</span><span class="o">%</span><span class="p">)</span>
<span class="w">             </span><span class="mi">91</span><span class="w"> </span><span class="n">active</span><span class="o">+</span><span class="n">clean</span>
<span class="w">             </span><span class="mi">68</span><span class="w"> </span><span class="n">active</span><span class="o">+</span><span class="n">undersized</span><span class="o">+</span><span class="n">degraded</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfill_wait</span>
<span class="w">             </span><span class="mi">35</span><span class="w"> </span><span class="n">active</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfill_wait</span>
<span class="w">             </span><span class="mi">6</span><span class="w">  </span><span class="n">active</span><span class="o">+</span><span class="n">undersized</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfill_wait</span>
<span class="w">             </span><span class="mi">1</span><span class="w">  </span><span class="n">peering</span>

<span class="w">  </span><span class="n">io</span><span class="p">:</span>
<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w">   </span><span class="mf">6.1</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">rd</span><span class="p">,</span><span class="w"> </span><span class="mi">475</span><span class="w"> </span><span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">wr</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">op</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">rd</span><span class="p">,</span><span class="w"> </span><span class="mi">39</span><span class="w"> </span><span class="n">op</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">wr</span>
<span class="w">    </span><span class="n">recovery</span><span class="p">:</span><span class="w"> </span><span class="mi">386</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">keys</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="n">objects</span><span class="o">/</span><span class="n">s</span>


<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get no</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="k">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="k">master</span><span class="p">,</span><span class="n">worker</span><span class="w">           </span><span class="mi">19</span><span class="n">m</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="k">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc edit no ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab</span>
<span class="n">Edit</span><span class="w"> </span><span class="n">cancelled</span><span class="p">,</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">changes</span><span class="w"> </span><span class="n">made</span><span class="o">.</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get no --show-labels ncpvblvhub-hubmaster-101.ncpvblvhub.t-mobile.lab</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span><span class="w">            </span><span class="n">LABELS</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="k">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span><span class="w">   </span><span class="n">beta</span><span class="o">.</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">arch</span><span class="o">=</span><span class="n">amd64</span><span class="p">,</span><span class="n">beta</span><span class="o">.</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">os</span><span class="o">=</span><span class="n">linux</span><span class="p">,</span><span class="n">cluster</span><span class="o">.</span><span class="n">ocs</span><span class="o">.</span><span class="n">openshift</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">openshift</span><span class="o">-</span><span class="n">storage</span><span class="o">=</span><span class="p">,</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">arch</span><span class="o">=</span><span class="n">amd64</span><span class="p">,</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">hostname</span><span class="o">=</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="p">,</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">os</span><span class="o">=</span><span class="n">linux</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">role</span><span class="o">.</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="o">=</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">role</span><span class="o">.</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="k">master</span><span class="o">=</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">role</span><span class="o">.</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">monitor</span><span class="o">=</span><span class="p">,</span><span class="n">node</span><span class="o">-</span><span class="n">role</span><span class="o">.</span><span class="n">kubernetes</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">worker</span><span class="o">=</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">openshift</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">os_id</span><span class="o">=</span><span class="n">rhcos</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc label node ncpvblvhub-hubmaster-102.ncpvblvhub.t-mobile.lab node-role.kubernetes.io/monitor=</span>
<span class="n">node</span><span class="o">/</span><span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w"> </span><span class="n">labeled</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc get no</span>
<span class="n">NAME</span><span class="w">                                               </span><span class="n">STATUS</span><span class="w">   </span><span class="n">ROLES</span><span class="w">                                 </span><span class="n">AGE</span><span class="w">   </span><span class="n">VERSION</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="k">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="k">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">20</span><span class="n">m</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubmaster</span><span class="o">-</span><span class="mf">103.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">control</span><span class="o">-</span><span class="n">plane</span><span class="p">,</span><span class="k">master</span><span class="p">,</span><span class="n">monitor</span><span class="p">,</span><span class="n">worker</span><span class="w">   </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">101.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>
<span class="n">ncpvblvhub</span><span class="o">-</span><span class="n">hubworker</span><span class="o">-</span><span class="mf">102.</span><span class="n">ncpvblvhub</span><span class="o">.</span><span class="n">t</span><span class="o">-</span><span class="n">mobile</span><span class="o">.</span><span class="n">lab</span><span class="w">   </span><span class="n">Ready</span><span class="w">    </span><span class="n">gateway</span><span class="p">,</span><span class="n">worker</span><span class="w">                        </span><span class="mi">74</span><span class="n">d</span><span class="w">   </span><span class="n">v1</span><span class="o">.</span><span class="mf">29.10</span><span class="o">+</span><span class="mi">67</span><span class="n">d3387</span>


<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc exec -it $(oc get pod -n openshift-storage -l app=rook-ceph-operator -o name) -n openshift-storage -- ceph status -c /var/lib/rook/openshift-storage/openshift-storage.config</span>
<span class="w">  </span><span class="n">cluster</span><span class="p">:</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w">     </span><span class="mi">27</span><span class="n">b507a3</span><span class="o">-</span><span class="n">b496</span><span class="o">-</span><span class="mi">4549</span><span class="o">-</span><span class="mi">9271</span><span class="o">-</span><span class="n">a3bc0705dd13</span>
<span class="w">    </span><span class="n">health</span><span class="p">:</span><span class="w"> </span><span class="n">HEALTH_WARN</span>
<span class="w">            </span><span class="n">Degraded</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">redundancy</span><span class="p">:</span><span class="w"> </span><span class="mi">44107</span><span class="o">/</span><span class="mi">433023</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">degraded</span><span class="w"> </span><span class="p">(</span><span class="mf">10.186</span><span class="o">%</span><span class="p">),</span><span class="w"> </span><span class="mi">39</span><span class="w"> </span><span class="n">pgs</span><span class="w"> </span><span class="n">degraded</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="w"> </span><span class="n">pgs</span><span class="w"> </span><span class="n">undersized</span>

<span class="w">  </span><span class="n">services</span><span class="p">:</span>
<span class="w">    </span><span class="n">mon</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">daemons</span><span class="p">,</span><span class="w"> </span><span class="n">quorum</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">e</span><span class="w"> </span><span class="p">(</span><span class="n">age</span><span class="w"> </span><span class="mi">9</span><span class="n">m</span><span class="p">)</span>
<span class="w">    </span><span class="n">mgr</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="p">(</span><span class="n">active</span><span class="p">,</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">3</span><span class="n">h</span><span class="p">),</span><span class="w"> </span><span class="n">standbys</span><span class="p">:</span><span class="w"> </span><span class="n">a</span>
<span class="w">    </span><span class="n">mds</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">daemons</span><span class="w"> </span><span class="n">up</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">hot</span><span class="w"> </span><span class="n">standby</span>
<span class="w">    </span><span class="n">osd</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">osds</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="mi">8</span><span class="n">m</span><span class="p">),</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="mi">8</span><span class="n">m</span><span class="p">);</span><span class="w"> </span><span class="mi">77</span><span class="w"> </span><span class="n">remapped</span><span class="w"> </span><span class="n">pgs</span>
<span class="w">    </span><span class="n">rgw</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">daemon</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">hosts</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">zones</span><span class="p">)</span>

<span class="w">  </span><span class="n">data</span><span class="p">:</span>
<span class="w">    </span><span class="n">volumes</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">healthy</span>
<span class="w">    </span><span class="n">pools</span><span class="p">:</span><span class="w">   </span><span class="mi">12</span><span class="w"> </span><span class="n">pools</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="w"> </span><span class="n">pgs</span>
<span class="w">    </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mf">144.34</span><span class="n">k</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="mi">541</span><span class="w"> </span><span class="n">GiB</span>
<span class="w">    </span><span class="n">usage</span><span class="p">:</span><span class="w">   </span><span class="mf">1.4</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">21</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="n">avail</span>
<span class="w">    </span><span class="n">pgs</span><span class="p">:</span><span class="w">     </span><span class="mi">44107</span><span class="o">/</span><span class="mi">433023</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">degraded</span><span class="w"> </span><span class="p">(</span><span class="mf">10.186</span><span class="o">%</span><span class="p">)</span>
<span class="w">             </span><span class="mi">55928</span><span class="o">/</span><span class="mi">433023</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">misplaced</span><span class="w"> </span><span class="p">(</span><span class="mf">12.916</span><span class="o">%</span><span class="p">)</span>
<span class="w">             </span><span class="mi">123</span><span class="w"> </span><span class="n">active</span><span class="o">+</span><span class="n">clean</span>
<span class="w">             </span><span class="mi">37</span><span class="w">  </span><span class="n">active</span><span class="o">+</span><span class="n">undersized</span><span class="o">+</span><span class="n">degraded</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfill_wait</span>
<span class="w">             </span><span class="mi">35</span><span class="w">  </span><span class="n">active</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfill_wait</span>
<span class="w">             </span><span class="mi">4</span><span class="w">   </span><span class="n">active</span><span class="o">+</span><span class="n">undersized</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfill_wait</span>
<span class="w">             </span><span class="mi">2</span><span class="w">   </span><span class="n">active</span><span class="o">+</span><span class="n">undersized</span><span class="o">+</span><span class="n">degraded</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfilling</span>

<span class="w">  </span><span class="n">io</span><span class="p">:</span>
<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w">   </span><span class="mf">7.9</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">rd</span><span class="p">,</span><span class="w"> </span><span class="mi">355</span><span class="w"> </span><span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">wr</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">op</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">rd</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="w"> </span><span class="n">op</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">wr</span>
<span class="w">    </span><span class="n">recovery</span><span class="p">:</span><span class="w"> </span><span class="mi">550</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">keys</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">145</span><span class="w"> </span><span class="n">objects</span><span class="o">/</span><span class="n">s</span>


<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1"># oc exec -it $(oc get pod -n openshift-storage -l app=rook-ceph-operator -o name) -n openshift-storage -- ceph status -c /var/lib/rook/openshift-storage/openshift-storage.config</span>
<span class="w">  </span><span class="n">cluster</span><span class="p">:</span>
<span class="w">    </span><span class="n">id</span><span class="p">:</span><span class="w">     </span><span class="mi">27</span><span class="n">b507a3</span><span class="o">-</span><span class="n">b496</span><span class="o">-</span><span class="mi">4549</span><span class="o">-</span><span class="mi">9271</span><span class="o">-</span><span class="n">a3bc0705dd13</span>
<span class="w">    </span><span class="n">health</span><span class="p">:</span><span class="w"> </span><span class="n">HEALTH_OK</span>

<span class="w">  </span><span class="n">services</span><span class="p">:</span>
<span class="w">    </span><span class="n">mon</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">daemons</span><span class="p">,</span><span class="w"> </span><span class="n">quorum</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">e</span><span class="w"> </span><span class="p">(</span><span class="n">age</span><span class="w"> </span><span class="mi">18</span><span class="n">m</span><span class="p">)</span>
<span class="w">    </span><span class="n">mgr</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="p">(</span><span class="n">active</span><span class="p">,</span><span class="w"> </span><span class="n">since</span><span class="w"> </span><span class="mi">3</span><span class="n">h</span><span class="p">),</span><span class="w"> </span><span class="n">standbys</span><span class="p">:</span><span class="w"> </span><span class="n">a</span>
<span class="w">    </span><span class="n">mds</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">daemons</span><span class="w"> </span><span class="n">up</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">hot</span><span class="w"> </span><span class="n">standby</span>
<span class="w">    </span><span class="n">osd</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">osds</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="mi">16</span><span class="n">m</span><span class="p">),</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p">(</span><span class="n">since</span><span class="w"> </span><span class="mi">17</span><span class="n">m</span><span class="p">);</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class="n">remapped</span><span class="w"> </span><span class="n">pgs</span>
<span class="w">    </span><span class="n">rgw</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">daemon</span><span class="w"> </span><span class="n">active</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="n">hosts</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">zones</span><span class="p">)</span>

<span class="w">  </span><span class="n">data</span><span class="p">:</span>
<span class="w">    </span><span class="n">volumes</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="o">/</span><span class="mi">1</span><span class="w"> </span><span class="n">healthy</span>
<span class="w">    </span><span class="n">pools</span><span class="p">:</span><span class="w">   </span><span class="mi">12</span><span class="w"> </span><span class="n">pools</span><span class="p">,</span><span class="w"> </span><span class="mi">201</span><span class="w"> </span><span class="n">pgs</span>
<span class="w">    </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mf">144.51</span><span class="n">k</span><span class="w"> </span><span class="n">objects</span><span class="p">,</span><span class="w"> </span><span class="mi">542</span><span class="w"> </span><span class="n">GiB</span>
<span class="w">    </span><span class="n">usage</span><span class="p">:</span><span class="w">   </span><span class="mf">1.6</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">21</span><span class="w"> </span><span class="n">TiB</span><span class="w"> </span><span class="n">avail</span>
<span class="w">    </span><span class="n">pgs</span><span class="p">:</span><span class="w">     </span><span class="mi">46224</span><span class="o">/</span><span class="mi">433527</span><span class="w"> </span><span class="n">objects</span><span class="w"> </span><span class="n">misplaced</span><span class="w"> </span><span class="p">(</span><span class="mf">10.662</span><span class="o">%</span><span class="p">)</span>
<span class="w">             </span><span class="mi">171</span><span class="w"> </span><span class="n">active</span><span class="o">+</span><span class="n">clean</span>
<span class="w">             </span><span class="mi">28</span><span class="w">  </span><span class="n">active</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfill_wait</span>
<span class="w">             </span><span class="mi">2</span><span class="w">   </span><span class="n">active</span><span class="o">+</span><span class="n">remapped</span><span class="o">+</span><span class="n">backfilling</span>

<span class="w">  </span><span class="n">io</span><span class="p">:</span>
<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w">   </span><span class="mf">5.7</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">rd</span><span class="p">,</span><span class="w"> </span><span class="mi">396</span><span class="w"> </span><span class="n">KiB</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">wr</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">op</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">rd</span><span class="p">,</span><span class="w"> </span><span class="mi">37</span><span class="w"> </span><span class="n">op</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="n">wr</span>
<span class="w">    </span><span class="n">recovery</span><span class="p">:</span><span class="w"> </span><span class="mi">155</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span><span class="w"> </span><span class="n">objects</span><span class="o">/</span><span class="n">s</span>

<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">dom16hub101</span><span class="o">-</span><span class="n">infra</span><span class="o">-</span><span class="n">manager</span><span class="w"> </span><span class="o">~</span><span class="p">]</span><span class="c1">#</span>
</code></pre></div>

<blockquote>
<p>Continue the same steps for <code>master1</code> and <code>master3</code> as well, if you want to replace all three master nodes. </p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../../../js/auth.js"></script>
      
    
  </body>
</html>