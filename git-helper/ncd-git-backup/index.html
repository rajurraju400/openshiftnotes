
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for OpenShift installation, backup, storage, troubleshooting, and more.">
      
      
        <meta name="author" content="venkatapathirajr">
      
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../ncd-git-restore/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Git Backup - OpenShift Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Red+Hat+Text:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Red Hat Text";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/redhat-style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#backing-up-nokia-git-server" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OpenShift Notes" class="md-header__button md-logo" aria-label="OpenShift Notes" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenShift Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Git Backup
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OpenShift Notes" class="md-nav__button md-logo" aria-label="OpenShift Notes" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    OpenShift Notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Git Helper
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Git Helper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Git Backup
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Git Backup
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instructions-on-backing-up-nokia-git-server" class="md-nav__link">
    <span class="md-ellipsis">
      Instructions on backing up Nokia Git Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instructions on backing up Nokia Git Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup-utility-will-generate-the-following-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      backup utility will generate the following outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-plugins-for-helm-backup-and-restore" class="md-nav__link">
    <span class="md-ellipsis">
      remove plugins for helm (backup and restore)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-plugins-for-helm-backup-and-restore" class="md-nav__link">
    <span class="md-ellipsis">
      Install plugins for helm (backup and restore)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-nokia-git-server" class="md-nav__link">
    <span class="md-ellipsis">
      Backup Nokia Git Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup Nokia Git Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-user-for-remote-backup" class="md-nav__link">
    <span class="md-ellipsis">
      Creating user for remote backup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-remote-backup-on-ncd-git" class="md-nav__link">
    <span class="md-ellipsis">
      Creating remote backup on NCD git
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating remote backup on NCD git">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-on-the-git-cbur-side" class="md-nav__link">
    <span class="md-ellipsis">
      update on the git cbur side.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-the-backup-on-remote-desination" class="md-nav__link">
    <span class="md-ellipsis">
      Trigger the backup on remote desination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certificate-error" class="md-nav__link">
    <span class="md-ellipsis">
      Certificate error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-job-failure" class="md-nav__link">
    <span class="md-ellipsis">
      backup job failure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      Reference
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ncd-git-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Restore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment Scripts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Deployment Scripts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Deployment/backupconfig.sh" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Deployment/newgitserver.sh" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    New Git Server (v1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Deployment/git-server-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GIT deployment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    OpenShift
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            OpenShift
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Backup & Restore
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Backup & Restore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/backup-restore/ACM-GEO-RED/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACM GEO Red
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/backup-restore/ACM-localbackup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ACM Local Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/backup-restore/AWS-S3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS S3 Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/backup-restore/etcd-backup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETCD Backup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/backup-restore/etcd-restore/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETCD Restore
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    CNF Onboarding Support
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            CNF Onboarding Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/CNF-onboarding-support/image-tls-issue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image TLS Issue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/CNF-onboarding-support/oclogin-tls-issue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OCLogin TLS Issue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/CNF-onboarding-support/proxy-cache-pod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proxy Cache Pod
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/CNF-onboarding-support/rolebinding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Role Allocation for CNF user
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/CNF-onboarding-support/Failtoconfigure_nncp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Failed to configure or Degraded
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/CNF-onboarding-support/kubeconfig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubeconfig overlapping
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/deployment/readme/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Maintenance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Maintenance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/maintenace/cluster-stop-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cluster Stop/Start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/maintenace/reboot-nodes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reboot Nodes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Networking
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Networking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/networking/metalb-troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MetalLB Troubleshooting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/networking/metallb-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MetalLB Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Storage Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Storage Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/storagemanagement/ceph-rebalanceissue/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ceph Rebalance Issue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/storagemanagement/storage-node-replacement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Storage Node Replacement
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/storagemanagement/one-OSD-not-created/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ceph OSD recreate
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/tools-management-ts/ts-tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools Management TS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/troubleshooting/nsenter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Nsenter Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/troubleshooting/ncomsa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NCOM Caas Issue
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            User Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/usermanagement/remove-kubeadmin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Remove Kubeadmin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/usermanagement/user-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Project Management
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            Project Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../openshift/projectmanagement/scope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scope of work
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#instructions-on-backing-up-nokia-git-server" class="md-nav__link">
    <span class="md-ellipsis">
      Instructions on backing up Nokia Git Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instructions on backing up Nokia Git Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup-utility-will-generate-the-following-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      backup utility will generate the following outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prerequisites">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#remove-plugins-for-helm-backup-and-restore" class="md-nav__link">
    <span class="md-ellipsis">
      remove plugins for helm (backup and restore)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-plugins-for-helm-backup-and-restore" class="md-nav__link">
    <span class="md-ellipsis">
      Install plugins for helm (backup and restore)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-nokia-git-server" class="md-nav__link">
    <span class="md-ellipsis">
      Backup Nokia Git Server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backup Nokia Git Server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-user-for-remote-backup" class="md-nav__link">
    <span class="md-ellipsis">
      Creating user for remote backup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-remote-backup-on-ncd-git" class="md-nav__link">
    <span class="md-ellipsis">
      Creating remote backup on NCD git
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Creating remote backup on NCD git">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#update-on-the-git-cbur-side" class="md-nav__link">
    <span class="md-ellipsis">
      update on the git cbur side.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trigger-the-backup-on-remote-desination" class="md-nav__link">
    <span class="md-ellipsis">
      Trigger the backup on remote desination
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#certificate-error" class="md-nav__link">
    <span class="md-ellipsis">
      Certificate error
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-job-failure" class="md-nav__link">
    <span class="md-ellipsis">
      backup job failure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      Reference
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="backing-up-nokia-git-server">Backing up Nokia Git Server<a class="headerlink" href="#backing-up-nokia-git-server" title="Permanent link">&para;</a></h1>
<blockquote>
<p>this procedure, works for NCD 24.9 mp1 pp1. </p>
</blockquote>
<h2 id="instructions-on-backing-up-nokia-git-server">Instructions on backing up Nokia Git Server<a class="headerlink" href="#instructions-on-backing-up-nokia-git-server" title="Permanent link">&para;</a></h2>
<h3 id="backup-utility-will-generate-the-following-outputs">backup utility will generate the following outputs<a class="headerlink" href="#backup-utility-will-generate-the-following-outputs" title="Permanent link">&para;</a></h3>
<ul>
<li>database.sql file containing the PostgreSQL database content</li>
<li>Git repository data</li>
<li>Kubernetes secrets required for the upgrade</li>
<li>
<p>backup_information.yml generated by the backup tool</p>
</li>
<li>
<p>Example of backup_information.yml</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="p">:</span><span class="n">db_version</span><span class="p">:</span><span class="w"> </span><span class="mi">20240508085441</span>
<span class="p">:</span><span class="n">backup_created_at</span><span class="p">:</span><span class="w"> </span><span class="mi">2024</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">13</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">57</span><span class="p">:</span><span class="mi">08</span><span class="w"> </span><span class="o">+</span><span class="mi">0000</span>
<span class="p">:</span><span class="n">gitlab_version</span><span class="p">:</span><span class="w"> </span><span class="mf">17.0</span><span class="o">.</span><span class="mi">1</span>
<span class="p">:</span><span class="n">tar_version</span><span class="p">:</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="p">(</span><span class="n">GNU</span><span class="w"> </span><span class="n">tar</span><span class="p">)</span><span class="w"> </span><span class="mf">1.34</span>
<span class="p">:</span><span class="n">installation_type</span><span class="p">:</span><span class="w"> </span><span class="n">gitlab</span><span class="o">-</span><span class="n">helm</span><span class="o">-</span><span class="n">chart</span>
<span class="p">:</span><span class="n">skipped</span><span class="p">:</span><span class="w"> </span><span class="n">builds</span><span class="p">,</span><span class="n">pages</span><span class="p">,</span><span class="n">registry</span><span class="p">,</span><span class="n">uploads</span><span class="p">,</span><span class="n">artifacts</span><span class="p">,</span><span class="n">lfs</span><span class="p">,</span><span class="n">packages</span><span class="p">,</span>
<span class="n">external_diffs</span><span class="p">,</span><span class="n">terraform_state</span><span class="p">,</span><span class="n">pages</span><span class="p">,</span><span class="n">ci_secure_files</span>
<span class="p">:</span><span class="n">repositories_server_side</span><span class="p">:</span><span class="w"> </span><span class="bp">false</span>
</code></pre></div>

<h3 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h3>
<ul>
<li>To back up Nokia Git Server and the necessary Helm plugins for Backup and Recovery (CBUR), CBUR must be installed on your cluster.</li>
<li>CBUR must be enabled in the Nokia Git Server installation.</li>
</ul>
<h5 id="remove-plugins-for-helm-backup-and-restore">remove plugins for helm (backup and restore)<a class="headerlink" href="#remove-plugins-for-helm-backup-and-restore" title="Permanent link">&para;</a></h5>
<ol>
<li>login to bastion host and login to cluster here .</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">panhubrc</span>
<span class="nl">WARNING</span><span class="p">:</span><span class="w"> </span><span class="k">Using</span><span class="w"> </span><span class="n">insecure</span><span class="w"> </span><span class="n">TLS</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="w"> </span><span class="n">Setting</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">option</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">supported</span><span class="err">!</span>

<span class="n">Login</span><span class="w"> </span><span class="n">successful</span><span class="p">.</span>

<span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="n">projects</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">suppressed</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">projects</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s1">&#39;oc projects&#39;</span>

<span class="k">Using</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="ss">&quot;default&quot;</span><span class="p">.</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>list of plugins installed on helm here.</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">list</span>
<span class="n">NAME</span><span class="w">    </span><span class="n">VERSION</span><span class="w"> </span><span class="n">DESCRIPTION</span>
<span class="k">backup</span><span class="w">  </span><span class="mf">0.1.2</span><span class="w">   </span><span class="k">backup</span><span class="o">/</span><span class="k">restore</span><span class="w"> </span><span class="n">releases</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">namespace</span><span class="w"> </span><span class="k">to</span><span class="o">/</span><span class="k">from</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">file</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>remove using following command on helm <code>#helm plugin remove backup</code></li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="k">backup</span>
<span class="n">Uninstalled</span><span class="w"> </span><span class="nl">plugin</span><span class="p">:</span><span class="w"> </span><span class="k">backup</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<h4 id="install-plugins-for-helm-backup-and-restore">Install plugins for helm (backup and restore)<a class="headerlink" href="#install-plugins-for-helm-backup-and-restore" title="Permanent link">&para;</a></h4>
<ol>
<li>login to bastion host and login to cluster here .</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">panhubrc</span>
<span class="nl">WARNING</span><span class="p">:</span><span class="w"> </span><span class="k">Using</span><span class="w"> </span><span class="n">insecure</span><span class="w"> </span><span class="n">TLS</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="w"> </span><span class="n">Setting</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">option</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">supported</span><span class="err">!</span>

<span class="n">Login</span><span class="w"> </span><span class="n">successful</span><span class="p">.</span>

<span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="n">projects</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">suppressed</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">projects</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s1">&#39;oc projects&#39;</span>

<span class="k">Using</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="ss">&quot;default&quot;</span><span class="p">.</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>list of plugins installed on helm here.</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">list</span>
<span class="n">NAME</span><span class="w">    </span><span class="n">VERSION</span><span class="w"> </span><span class="n">DESCRIPTION</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>Install the latest version of the Helm backup and restore plugins.</li>
</ol>
<blockquote>
<p>For the Helm backup and restore plugins, use the version that is compatible with the respective Backup and Recovery chart release.</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">HELM_HOME</span><span class="o">=$</span><span class="n">HOME</span><span class="o">/.</span><span class="n">helm</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">cd</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">WORK_DIR</span><span class="o">=</span><span class="err">`</span><span class="n">mktemp</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="err">`</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">$</span><span class="n">WORK_DIR</span><span class="o">/</span><span class="n">backup</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">mkdir</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="o">$</span><span class="n">WORK_DIR</span><span class="o">/</span><span class="n">restore</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="n">xf</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ncd</span><span class="o">/</span><span class="n">NCD_24</span><span class="o">.</span><span class="mi">9</span><span class="n">_Git_Server_ORB</span><span class="o">-</span><span class="n">RC</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">product</span><span class="o">/</span><span class="n">INSTALL_MEDIA</span><span class="o">/</span><span class="n">backup</span><span class="o">-</span><span class="mf">3.7</span><span class="o">.</span><span class="mf">4.</span><span class="n">tgz</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">$</span><span class="n">WORK_DIR</span><span class="o">/</span><span class="n">backup</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="n">xf</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ncd</span><span class="o">/</span><span class="n">NCD_24</span><span class="o">.</span><span class="mi">9</span><span class="n">_Git_Server_ORB</span><span class="o">-</span><span class="n">RC</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">product</span><span class="o">/</span><span class="n">INSTALL_MEDIA</span><span class="o">/</span><span class="n">restore</span><span class="o">-</span><span class="mf">3.7</span><span class="o">.</span><span class="mf">4.</span><span class="n">tgz</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">$</span><span class="n">WORK_DIR</span><span class="o">/</span><span class="n">restore</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">$</span><span class="n">WORK_DIR</span><span class="o">/</span><span class="n">backup</span>
<span class="n">Installed</span><span class="w"> </span><span class="n">plugin</span><span class="p">:</span><span class="w"> </span><span class="n">backup</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="o">$</span><span class="n">WORK_DIR</span><span class="o">/</span><span class="n">restore</span>
<span class="n">Installed</span><span class="w"> </span><span class="n">plugin</span><span class="p">:</span><span class="w"> </span><span class="n">restore</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">rf</span><span class="w"> </span><span class="o">$</span><span class="n">WORK_DIR</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="n">a</span><span class="p">.</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">installed</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">plugins</span><span class="p">.</span>

<span class="err">```</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="n">list</span>
<span class="n">NAME</span><span class="w">    </span><span class="n">VERSION</span><span class="w"> </span><span class="n">DESCRIPTION</span>
<span class="k">backup</span><span class="w">  </span><span class="mf">3.7.4</span><span class="w">   </span><span class="n">Plugin</span><span class="w"> </span><span class="n">responsible</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">backup</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">releases</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">k8s</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CBUR</span><span class="p">.</span>
<span class="k">restore</span><span class="w"> </span><span class="mf">3.7.4</span><span class="w">   </span><span class="n">Plugin</span><span class="w"> </span><span class="n">responsible</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">restoring</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">releases</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">k8s</span><span class="w"> </span><span class="n">namespaces</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">CBUR</span><span class="p">.</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span>
<span class="err">```</span>
</code></pre></div>

<ol>
<li>Configure RBAC for CRDs. (only when you deploy using tenant credentials)</li>
</ol>
<blockquote>
<p>For tenants only using Backup and Recovery, permission to read, create, modify and delete BrPolicy and BrHook is sufficient. However, tenants installing their own namespaces for Backup and Recovery also need permission to read brpolices/status.</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ClusterRole</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">rbac</span><span class="o">.</span><span class="na">authorization</span><span class="o">.</span><span class="na">k8s</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">admin</span><span class="o">:</span><span class="n">brpolices</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">rbac</span><span class="o">.</span><span class="na">authorization</span><span class="o">.</span><span class="na">k8s</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">aggregate</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">admin</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>
<span class="w">    </span><span class="n">rbac</span><span class="o">.</span><span class="na">authorization</span><span class="o">.</span><span class="na">k8s</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">aggregate</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">edit</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>
<span class="n">rules</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">apiGroups</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;cbur.csf.nokia.com&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">resources</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;brpolices&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;brhooks&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">verbs</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;get&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;list&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;watch&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;create&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;patch&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;delete&quot;</span><span class="o">]</span>
<span class="o">-</span><span class="w"> </span><span class="n">apiGroups</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;cbur.csf.nokia.com&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">resources</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;brpolices/status&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">verbs</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;get&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;list&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;watch&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;update&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;patch&quot;</span><span class="o">]</span>
<span class="o">---</span>
<span class="n">kind</span><span class="o">:</span><span class="w"> </span><span class="n">ClusterRole</span>
<span class="n">apiVersion</span><span class="o">:</span><span class="w"> </span><span class="n">rbac</span><span class="o">.</span><span class="na">authorization</span><span class="o">.</span><span class="na">k8s</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">v1</span>
<span class="n">metadata</span><span class="o">:</span>
<span class="w">  </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="n">view</span><span class="o">:</span><span class="n">brpolices</span>
<span class="w">  </span><span class="n">labels</span><span class="o">:</span>
<span class="w">    </span><span class="n">rbac</span><span class="o">.</span><span class="na">authorization</span><span class="o">.</span><span class="na">k8s</span><span class="o">.</span><span class="na">io</span><span class="o">/</span><span class="n">aggregate</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">view</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;true&quot;</span>
<span class="n">rules</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">apiGroups</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;cbur.csf.nokia.com&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">resources</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;brpolices&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;brhooks&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;brpolices/status&quot;</span><span class="o">]</span>
<span class="w">  </span><span class="n">verbs</span><span class="o">:</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;get&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;list&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;watch&quot;</span><span class="o">]</span>
</code></pre></div>

<h3 id="backup-nokia-git-server">Backup Nokia Git Server<a class="headerlink" href="#backup-nokia-git-server" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Notes:</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="n">The</span><span class="w"> </span><span class="n">CBUR</span><span class="w"> </span><span class="n">master</span><span class="w"> </span><span class="n">service</span><span class="w"> </span><span class="p">(</span><span class="n">CBUR_MASTER_SERVICE</span><span class="p">)</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">specified</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="nl">formats</span><span class="p">:</span>
<span class="n">http</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="err">:</span><span class="o">//</span><span class="nl">dns_name</span><span class="p">:</span><span class="n">port</span>
<span class="n">http</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="err">:</span><span class="o">//</span><span class="nl">ipv4</span><span class="p">:</span><span class="n">port</span>
<span class="n">http</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="err">:</span><span class="o">//[</span><span class="n">ipv6</span><span class="o">]</span><span class="err">:</span><span class="n">port</span>
<span class="n">http</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="err">:</span><span class="o">//</span><span class="n">dns_name</span>
<span class="n">http</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="err">:</span><span class="o">//</span><span class="n">ingress</span><span class="o">/</span><span class="n">ingresspath</span>
</code></pre></div>

<blockquote>
<p>here is the command to run the backup of git server </p>
</blockquote>
<div class="codehilite"><pre><span></span><code>helm backup -t ncd-git -a none -n paclypancdgit01 -x http://172.20.8.113:80

helm backup -n paclypancdgit01 -t ncd-git -a none -x http://172.20.8.113:80
</code></pre></div>

<ol>
<li>login to bastion host and login to cluster here .</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">panhubrc</span>
<span class="nl">WARNING</span><span class="p">:</span><span class="w"> </span><span class="k">Using</span><span class="w"> </span><span class="n">insecure</span><span class="w"> </span><span class="n">TLS</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="w"> </span><span class="n">Setting</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">option</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">supported</span><span class="err">!</span>

<span class="n">Login</span><span class="w"> </span><span class="n">successful</span><span class="p">.</span>

<span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="n">projects</span><span class="p">,</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">suppressed</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="ow">all</span><span class="w"> </span><span class="n">projects</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s1">&#39;oc projects&#39;</span>

<span class="k">Using</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="ss">&quot;default&quot;</span><span class="p">.</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>Find the <code>namespace</code> and <code>release</code> name of git server and cbut details from here 'helm list -A '</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">list</span><span class="w">  </span><span class="o">-</span><span class="n">A</span>
<span class="n">NAME</span><span class="w">            </span><span class="n">NAMESPACE</span><span class="w">               </span><span class="n">REVISION</span><span class="w">        </span><span class="n">UPDATED</span><span class="w">                                 </span><span class="n">STATUS</span><span class="w">          </span><span class="n">CHART</span><span class="w">                                   </span><span class="n">APP</span><span class="w"> </span><span class="n">VERSION</span>
<span class="n">cbur</span><span class="o">-</span><span class="n">crds</span><span class="w">       </span><span class="n">paclypancdcbur01</span><span class="w">        </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">18</span><span class="err">:</span><span class="mf">04.313208995</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">cbur</span><span class="o">-</span><span class="n">crds</span><span class="o">-</span><span class="mf">2.6.0</span><span class="w">                         </span><span class="mf">2.6.0</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="w">        </span><span class="n">paclypancdcbur01</span><span class="w">        </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">24</span><span class="err">:</span><span class="mf">56.578242699</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">cbur</span><span class="o">-</span><span class="mf">1.18.1</span><span class="w">                             </span><span class="mf">1.13.1</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w">         </span><span class="n">paclypancdgit01</span><span class="w">         </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">45</span><span class="err">:</span><span class="mf">25.489107042</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">7.</span><span class="n">g30f1acf</span><span class="w">        </span><span class="mf">17.3.3</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">postgresql</span><span class="w">  </span><span class="n">paclypancddb01</span><span class="w">          </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">30</span><span class="err">:</span><span class="mf">27.65639258</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w">  </span><span class="n">deployed</span><span class="w">        </span><span class="n">postgresql</span><span class="o">-</span><span class="n">ha</span><span class="o">-</span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span><span class="w">      </span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">redis</span><span class="w">       </span><span class="n">paclypancddb01</span><span class="w">          </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">37</span><span class="err">:</span><span class="mf">11.651840036</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">ncd</span><span class="o">-</span><span class="n">redis</span><span class="o">-</span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span><span class="w">          </span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>trigger the backup job using following command here </li>
</ol>
<blockquote>
<p>Uri should be having <code>cbur</code> structure name in it </p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="k">backup</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="k">none</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">cbur</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">panclyphub01</span><span class="p">.</span><span class="n">mnc020</span><span class="p">.</span><span class="n">mcc714</span><span class="o">/</span><span class="n">cbur</span>
<span class="err">{</span>
<span class="w">  </span><span class="ss">&quot;kind&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Status&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;apiVersion&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;v1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;metadata&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{}</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;status&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Success&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;message&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;backupHelmRelease task = a80ed466-254c-4644-8d19-9a0cdf813fbe is on!&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;reason&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;details&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="ss">&quot;a80ed466-254c-4644-8d19-9a0cdf813fbe&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="ss">&quot;name&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;ncd-git&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;namespace&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;paclypancdgit01&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;timestamp&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;20250402104554&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;backup_data&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{}</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;helm_version&quot;</span><span class="err">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;request&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;backupHelmRelease&quot;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">  </span><span class="err">}</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;code&quot;</span><span class="err">:</span><span class="w"> </span><span class="mi">202</span>
<span class="err">}</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span>
</code></pre></div>

<ol>
<li>here is an example with <code>--verbose</code> mode  (optinal for troubleshooting)</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">backup</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="n">none</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">cbur</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">panclyphub01</span><span class="o">.</span><span class="n">mnc020</span><span class="o">.</span><span class="n">mcc714</span><span class="o">/</span><span class="n">cbur</span><span class="w"> </span><span class="o">--</span><span class="n">verbose</span>
<span class="o">*******</span>
<span class="o">+</span><span class="w"> </span><span class="n">exit_func</span><span class="w"> </span><span class="mi">0</span>
<span class="o">+</span><span class="w"> </span><span class="s1">&#39;[&#39;</span><span class="w"> </span><span class="o">-</span><span class="n">d</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">certs</span><span class="o">.</span><span class="mi">1974896</span><span class="w"> </span><span class="s1">&#39;]&#39;</span>
<span class="o">+</span><span class="w"> </span><span class="n">rm</span><span class="w"> </span><span class="o">-</span><span class="n">rf</span><span class="w"> </span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">certs</span><span class="o">.</span><span class="mi">1974896</span>
<span class="o">+</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="mi">0</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span>
</code></pre></div>

<ol>
<li>check the status of the backup using cbur br policy status</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">brpolices</span><span class="o">.</span><span class="n">cbur</span><span class="o">.</span><span class="n">csf</span><span class="o">.</span><span class="n">nokia</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span>
<span class="n">NAME</span><span class="w">              </span><span class="n">AGE</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="w">   </span><span class="mi">33</span><span class="n">d</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">kubectl</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">brpolices</span><span class="o">.</span><span class="n">cbur</span><span class="o">.</span><span class="n">csf</span><span class="o">.</span><span class="n">nokia</span><span class="o">.</span><span class="n">com</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">yaml</span>
<span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span>
</code></pre></div>

<ol>
<li>look for backup files exported. , right now backup files are saved locally on the gitserver(paclypancdgit01) <code>namespace</code> within <code>ncd-git-toolbox</code> pod. </li>
</ol>
<blockquote>
<p>but we need this backup files to be saved outside the cluster, like sftp server or something, so that we can restore it on new git server.</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">root</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">panhub_rc</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="o">-</span><span class="n">it</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="o">-</span><span class="mi">56</span><span class="n">b88dd4c7</span><span class="o">-</span><span class="mi">27</span><span class="n">hb5</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">bash</span>
<span class="n">Defaulted</span><span class="w"> </span><span class="n">container</span><span class="w"> </span><span class="s2">&quot;toolbox&quot;</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="p">:</span><span class="w"> </span><span class="n">toolbox</span><span class="p">,</span><span class="w"> </span><span class="n">cbura</span><span class="o">-</span><span class="n">sidecar</span><span class="p">,</span><span class="w"> </span><span class="n">certificates</span><span class="w"> </span><span class="p">(</span><span class="n">init</span><span class="p">),</span><span class="w"> </span><span class="n">configure</span><span class="w"> </span><span class="p">(</span><span class="n">init</span><span class="p">)</span>
<span class="n">git</span><span class="err">@</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="o">-</span><span class="mi">56</span><span class="n">b88dd4c7</span><span class="o">-</span><span class="mi">27</span><span class="n">hb5</span><span class="p">:</span><span class="o">/$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">gitlab</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">backups</span>
<span class="n">git</span><span class="err">@</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="o">-</span><span class="mi">56</span><span class="n">b88dd4c7</span><span class="o">-</span><span class="mi">27</span><span class="n">hb5</span><span class="p">:</span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">gitlab</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">backups</span><span class="o">$</span><span class="w"> </span><span class="n">ls</span>
<span class="n">backup_information</span><span class="o">.</span><span class="n">yml</span><span class="w">  </span><span class="n">db</span><span class="w">  </span><span class="n">repositories</span>
<span class="n">git</span><span class="err">@</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="o">-</span><span class="mi">56</span><span class="n">b88dd4c7</span><span class="o">-</span><span class="mi">27</span><span class="n">hb5</span><span class="p">:</span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">gitlab</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">backups</span><span class="o">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">la</span>
<span class="n">total</span><span class="w"> </span><span class="mi">4</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">sr</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">git</span><span class="w">  </span><span class="n">git</span><span class="w">  </span><span class="mi">66</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">46</span><span class="w"> </span><span class="o">.</span>
<span class="n">drwxrwsrwx</span><span class="o">.</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">git</span><span class="w">  </span><span class="mi">21</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">46</span><span class="w"> </span><span class="o">..</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">git</span><span class="w">  </span><span class="n">git</span><span class="w"> </span><span class="mi">318</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">46</span><span class="w"> </span><span class="n">backup_information</span><span class="o">.</span><span class="n">yml</span>
<span class="n">drwxr</span><span class="o">-</span><span class="n">sr</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">git</span><span class="w">  </span><span class="n">git</span><span class="w">  </span><span class="mi">29</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">46</span><span class="w"> </span><span class="n">db</span>
<span class="n">drwx</span><span class="o">--</span><span class="n">S</span><span class="o">---.</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="n">git</span><span class="w">  </span><span class="n">git</span><span class="w">  </span><span class="mi">38</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="mi">10</span><span class="p">:</span><span class="mi">46</span><span class="w"> </span><span class="n">repositories</span>
<span class="n">git</span><span class="err">@</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="o">-</span><span class="mi">56</span><span class="n">b88dd4c7</span><span class="o">-</span><span class="mi">27</span><span class="n">hb5</span><span class="p">:</span><span class="o">/</span><span class="n">srv</span><span class="o">/</span><span class="n">gitlab</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">backups</span><span class="o">$</span>
</code></pre></div>

<h4 id="creating-user-for-remote-backup">Creating user for remote backup<a class="headerlink" href="#creating-user-for-remote-backup" title="Permanent link">&para;</a></h4>
<ol>
<li>login to the <code>linux</code> host and used <code>useradd</code> and <code>passwd</code> commands to create <code>user and password</code> here </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nx">panhub_rc</span><span class="p">]</span><span class="err">$</span><span class="w"> </span><span class="nx">useradd</span><span class="w"> </span><span class="nx">gitserverbackup</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nx">panhub_rc</span><span class="p">]</span><span class="err">$</span><span class="w"> </span><span class="nx">passwd</span><span class="w"> </span><span class="nx">gitserverbackup</span>
<span class="nx">Changing</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="nx">gitserverbackup</span><span class="p">.</span>
<span class="nx">New</span><span class="w"> </span><span class="nx">password</span><span class="p">:</span>
<span class="nx">BAD</span><span class="w"> </span><span class="nx">PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="nx">The</span><span class="w"> </span><span class="nx">password</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="nx">shorter</span><span class="w"> </span><span class="nx">than</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="nx">characters</span>
<span class="nx">Retype</span><span class="w"> </span><span class="nx">new</span><span class="w"> </span><span class="nx">password</span><span class="p">:</span>
<span class="nx">passwd</span><span class="p">:</span><span class="w"> </span><span class="nx">all</span><span class="w"> </span><span class="nx">authentication</span><span class="w"> </span><span class="nx">tokens</span><span class="w"> </span><span class="nx">updated</span><span class="w"> </span><span class="nx">successfully</span><span class="p">.</span>
<span class="p">[</span><span class="nx">root</span><span class="err">@</span><span class="nx">ncputility</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nx">panhub_rc</span><span class="p">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>create a public key on the new user authrazation file.</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ pancwl_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">su</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">gitserverbackup</span>
<span class="o">[</span><span class="n">gitserverbackup@ncputility ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">pwd</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gitserverbackup</span>
<span class="o">[</span><span class="n">gitserverbackup@ncputility ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span>
<span class="o">[</span><span class="n">gitserverbackup@ncputility ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">keygen</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">rsa</span>
<span class="n">Generating</span><span class="w"> </span><span class="k">public</span><span class="o">/</span><span class="n">private</span><span class="w"> </span><span class="n">rsa</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">pair</span><span class="p">.</span>
<span class="n">Enter</span><span class="w"> </span><span class="k">file</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">save</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gitserverbackup</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">)</span><span class="err">:</span>
<span class="n">Created</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="s1">&#39;/home/gitserverbackup/.ssh&#39;</span><span class="p">.</span>
<span class="n">Enter</span><span class="w"> </span><span class="n">passphrase</span><span class="w"> </span><span class="p">(</span><span class="n">empty</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">passphrase</span><span class="p">)</span><span class="err">:</span>
<span class="n">Enter</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">passphrase</span><span class="w"> </span><span class="nl">again</span><span class="p">:</span>
<span class="n">Your</span><span class="w"> </span><span class="n">identification</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gitserverbackup</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span>
<span class="n">Your</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gitserverbackup</span><span class="o">/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span>
<span class="n">The</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">fingerprint</span><span class="w"> </span><span class="k">is</span><span class="err">:</span>
<span class="nl">SHA256</span><span class="p">:</span><span class="n">oF5K3Ky1tLDmb5ALID4FXyLPnlTtX97ZpJyFE0r3Z2A</span><span class="w"> </span><span class="n">gitserverbackup</span><span class="nv">@ncputility</span><span class="p">.</span><span class="n">panclyphub01</span><span class="p">.</span><span class="n">mnc020</span><span class="p">.</span><span class="n">mcc714</span>
<span class="n">The</span><span class="w"> </span><span class="k">key</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">randomart</span><span class="w"> </span><span class="nc">image</span><span class="w"> </span><span class="k">is</span><span class="err">:</span>
<span class="o">+</span><span class="c1">---[RSA 3072]----+</span>
<span class="o">|</span><span class="w">      </span><span class="p">.</span><span class="w">          </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="p">.</span><span class="w">   </span><span class="p">.</span><span class="w"> </span><span class="n">oE</span><span class="w">  </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">o</span><span class="w">   </span><span class="p">.</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="o">+</span><span class="p">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="n">o</span><span class="w">  </span><span class="n">B</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">o</span><span class="w">   </span><span class="n">o</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">+</span><span class="n">o</span><span class="o">|</span>
<span class="o">|</span><span class="n">o</span><span class="p">.</span><span class="o">+</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="n">O</span><span class="p">..</span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="o">=</span><span class="n">oO</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">  </span><span class="p">..</span><span class="o">*</span><span class="n">oo</span><span class="w">          </span><span class="o">|</span>
<span class="o">|</span><span class="w">   </span><span class="n">o</span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w">          </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="p">.</span><span class="n">o</span><span class="p">.</span><span class="w">          </span><span class="o">|</span>
<span class="o">+</span><span class="c1">----[SHA256]-----+</span>
<span class="o">[</span><span class="n">gitserverbackup@ncputility ~</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>take copy of the cbur public using following oc command</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">-</span><span class="n">A</span>
<span class="n">NAME</span><span class="w">            </span><span class="n">NAMESPACE</span><span class="w">               </span><span class="n">REVISION</span><span class="w">        </span><span class="n">UPDATED</span><span class="w">                                 </span><span class="n">STATUS</span><span class="w">          </span><span class="n">CHART</span><span class="w">                                   </span><span class="n">APP</span><span class="w"> </span><span class="n">VERSION</span>
<span class="n">cbur</span><span class="o">-</span><span class="n">crds</span><span class="w">       </span><span class="n">paclypancdcbur01</span><span class="w">        </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">18</span><span class="err">:</span><span class="mf">04.313208995</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">cbur</span><span class="o">-</span><span class="n">crds</span><span class="o">-</span><span class="mf">2.6.0</span><span class="w">                         </span><span class="mf">2.6.0</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="w">        </span><span class="n">paclypancdcbur01</span><span class="w">        </span><span class="mi">2</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">02</span><span class="w"> </span><span class="mi">04</span><span class="err">:</span><span class="mi">17</span><span class="err">:</span><span class="mf">30.755392541</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">cbur</span><span class="o">-</span><span class="mf">1.18.1</span><span class="w">                             </span><span class="mf">1.13.1</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w">         </span><span class="n">paclypancdgit01</span><span class="w">         </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">45</span><span class="err">:</span><span class="mf">25.489107042</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">7.</span><span class="n">g30f1acf</span><span class="w">        </span><span class="mf">17.3.3</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">postgresql</span><span class="w">  </span><span class="n">paclypancddb01</span><span class="w">          </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">30</span><span class="err">:</span><span class="mf">27.65639258</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w">  </span><span class="n">deployed</span><span class="w">        </span><span class="n">postgresql</span><span class="o">-</span><span class="n">ha</span><span class="o">-</span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span><span class="w">      </span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span>
<span class="n">ncd</span><span class="o">-</span><span class="n">redis</span><span class="w">       </span><span class="n">paclypancddb01</span><span class="w">          </span><span class="mi">1</span><span class="w">               </span><span class="mi">2025</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">27</span><span class="w"> </span><span class="mi">14</span><span class="err">:</span><span class="mi">37</span><span class="err">:</span><span class="mf">11.651840036</span><span class="w"> </span><span class="o">-</span><span class="mi">0500</span><span class="w"> </span><span class="n">EST</span><span class="w"> </span><span class="n">deployed</span><span class="w">        </span><span class="n">ncd</span><span class="o">-</span><span class="n">redis</span><span class="o">-</span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span><span class="w">          </span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">1009.</span><span class="n">g19e2a92</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdcbur01</span><span class="w"> </span><span class="n">cburm</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="k">public</span><span class="o">-</span><span class="k">key</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">jsonpath</span><span class="o">=</span><span class="err">{</span><span class="p">.</span><span class="k">data</span><span class="p">.</span><span class="n">ssh_public_key</span><span class="err">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="o">-</span><span class="n">d</span>
<span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span><span class="w"> </span><span class="n">AAAAB3NzaC1yc2EAAAADAQABAAABAQDUH73f7kf8ey2UEkgeN</span><span class="o">/</span><span class="n">IJbEBDJPgricRlsD7d7pB0RAQGLx</span><span class="o">/</span><span class="n">fNZT15VRX2qOvLydsTbtcxz28Uzryy5zAmAB9z0zGuYKaSo80bS7bXjIsKc71fGD6NvvfSBBLQ1GCk0mFIjn06XmkRJOgqtgOvq66HQEcGSJQ6jq3NQzGERe</span><span class="o">+</span><span class="n">VrCk1VWbyfr0vtqqasmKChgr0dAh</span><span class="o">+</span><span class="mi">0</span><span class="n">f07lUdpbR9XzEnOG20LNCAcffEBPXXccSEz</span><span class="o">/</span><span class="n">huPHOV0Kjfe7rtaKj5ZoIkFlFETPTz4HoKPlZcfxp</span><span class="o">/</span><span class="n">s94yICXk</span><span class="o">++</span><span class="n">TiI9</span><span class="o">+</span><span class="n">mF2SVYuEUWqx00p1DTa79dmUncTaz1c5nshaq4bNdJcPkoDdp</span><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>here i am using ssh-copy-id command to auto create an authzation file </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">gitserverbackup@ncputility ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="n">localhost</span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="nl">id</span><span class="p">:</span><span class="w"> </span><span class="nl">INFO</span><span class="p">:</span><span class="w"> </span><span class="n">Source</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="nl">installed</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;/home/gitserverbackup/.ssh/id_rsa.pub&quot;</span>
<span class="n">The</span><span class="w"> </span><span class="n">authenticity</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">host</span><span class="w"> </span><span class="s1">&#39;localhost (::1)&#39;</span><span class="w"> </span><span class="n">can</span><span class="s1">&#39;t be established.</span>
<span class="s1">ED25519 key fingerprint is SHA256:KXMGNVqIYHOtvcd+VqGq/5d/t5UWWGKxPVkuffCOD9I.</span>
<span class="s1">This key is not known by any other names</span>
<span class="s1">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span>
<span class="s1">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed</span>
<span class="s1">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys</span>
<span class="s1">gitserverbackup@localhost&#39;</span><span class="n">s</span><span class="w"> </span><span class="nl">password</span><span class="p">:</span>

<span class="n">Number</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="nl">added</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>

<span class="n">Now</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">logging</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">machine</span><span class="p">,</span><span class="w"> </span><span class="k">with</span><span class="err">:</span><span class="w">   </span><span class="ss">&quot;ssh &#39;localhost&#39;&quot;</span>
<span class="ow">and</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">sure</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">wanted</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">added</span><span class="p">.</span>

<span class="o">[</span><span class="n">gitserverbackup@ncputility ~</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span>
<span class="o">[</span><span class="n">gitserverbackup@ncputility .ssh</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">ll</span>
<span class="n">total</span><span class="w"> </span><span class="mi">20</span>
<span class="o">-</span><span class="n">rw</span><span class="c1">-------. 1 gitserverbackup gitserverbackup  607 Apr  2 08:14 authorized_keys</span>
<span class="o">-</span><span class="n">rw</span><span class="c1">-------. 1 gitserverbackup gitserverbackup 2655 Apr  2 08:14 id_rsa</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="c1">--r--. 1 gitserverbackup gitserverbackup  607 Apr  2 08:14 id_rsa.pub</span>
<span class="o">-</span><span class="n">rw</span><span class="c1">-------. 1 gitserverbackup gitserverbackup  825 Apr  2 08:14 known_hosts</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="c1">--r--. 1 gitserverbackup gitserverbackup   91 Apr  2 08:14 known_hosts.old</span>
<span class="o">[</span><span class="n">gitserverbackup@ncputility .ssh</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">vi</span><span class="w"> </span><span class="n">authorized_keys</span><span class="w">   </span><span class="err">#</span><span class="o">&lt;-</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">updated</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">step</span><span class="mf">.3</span><span class="w"> </span><span class="k">output</span><span class="o">&gt;</span>
<span class="o">[</span><span class="n">gitserverbackup@ncputility .ssh</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<h3 id="creating-remote-backup-on-ncd-git">Creating remote backup on NCD git<a class="headerlink" href="#creating-remote-backup-on-ncd-git" title="Permanent link">&para;</a></h3>
<ol>
<li>Create an git server backup on a remote server, so create a secret with sftp details. </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">oc</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="n">generic</span><span class="w"> </span><span class="n">bastionhostpan</span><span class="w"> </span><span class="err">\</span>
<span class="w">  </span><span class="c1">--namespace=paclypancdcbur01 \</span>
<span class="w">  </span><span class="c1">--from-literal=port=&quot;22&quot; \</span>
<span class="w">  </span><span class="c1">--from-literal=host=&quot;10.89.100.66&quot; \</span>
<span class="w">  </span><span class="c1">--from-literal=mode=&quot;sftp&quot; \</span>
<span class="w">  </span><span class="c1">--from-literal=username=&quot;gitserverbackup&quot; \</span>
<span class="w">  </span><span class="c1">--from-literal=path=&quot;/home/gitserverbackup&quot; \</span>
<span class="w">  </span><span class="c1">--from-literal=strictHostKeyChecking=&quot;no&quot; \</span>
<span class="w">  </span><span class="c1">--from-literal=hostKey=&quot;&quot;</span>
<span class="n">secret</span><span class="o">/</span><span class="n">bastionhostpan</span><span class="w"> </span><span class="n">created</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>make sure, it's avaiable via get command. </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">oc</span><span class="w">  </span><span class="k">get</span><span class="w"> </span><span class="n">secret</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdcbur01</span>
<span class="n">NAME</span><span class="w">                              </span><span class="n">TYPE</span><span class="w">                             </span><span class="k">DATA</span><span class="w">   </span><span class="n">AGE</span>
<span class="n">bastionhostpan</span><span class="w">                    </span><span class="n">Opaque</span><span class="w">                           </span><span class="mi">7</span><span class="w">      </span><span class="mi">10</span><span class="n">s</span>
<span class="n">cbur</span><span class="o">-</span><span class="n">redis</span><span class="w">                        </span><span class="n">Opaque</span><span class="w">                           </span><span class="mi">1</span><span class="w">      </span><span class="mi">33</span><span class="n">d</span>
<span class="n">cburm</span><span class="o">-</span><span class="n">ssh</span><span class="o">-</span><span class="k">public</span><span class="o">-</span><span class="k">key</span><span class="w">              </span><span class="n">Opaque</span><span class="w">                           </span><span class="mi">1</span><span class="w">      </span><span class="mi">33</span><span class="n">d</span>
<span class="n">my</span><span class="o">-</span><span class="n">pull</span><span class="o">-</span><span class="n">secret</span><span class="w">                    </span><span class="n">kubernetes</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">dockerconfigjson</span><span class="w">   </span><span class="mi">1</span><span class="w">      </span><span class="mi">33</span><span class="n">d</span>
<span class="n">sh</span><span class="p">.</span><span class="n">helm</span><span class="p">.</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="p">.</span><span class="n">cbur</span><span class="o">-</span><span class="n">crds</span><span class="p">.</span><span class="n">v1</span><span class="w">   </span><span class="n">helm</span><span class="p">.</span><span class="n">sh</span><span class="o">/</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="w">               </span><span class="mi">1</span><span class="w">      </span><span class="mi">33</span><span class="n">d</span>
<span class="n">sh</span><span class="p">.</span><span class="n">helm</span><span class="p">.</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="p">.</span><span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="p">.</span><span class="n">v1</span><span class="w">    </span><span class="n">helm</span><span class="p">.</span><span class="n">sh</span><span class="o">/</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="w">               </span><span class="mi">1</span><span class="w">      </span><span class="mi">33</span><span class="n">d</span>
<span class="n">sh</span><span class="p">.</span><span class="n">helm</span><span class="p">.</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="p">.</span><span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="p">.</span><span class="n">v2</span><span class="w">    </span><span class="n">helm</span><span class="p">.</span><span class="n">sh</span><span class="o">/</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="w">               </span><span class="mi">1</span><span class="w">      </span><span class="mi">4</span><span class="n">h14m</span>
<span class="n">sh</span><span class="p">.</span><span class="n">helm</span><span class="p">.</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="p">.</span><span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="p">.</span><span class="n">v3</span><span class="w">    </span><span class="n">helm</span><span class="p">.</span><span class="n">sh</span><span class="o">/</span><span class="k">release</span><span class="p">.</span><span class="n">v1</span><span class="w">               </span><span class="mi">1</span><span class="w">      </span><span class="mi">14</span><span class="n">m</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<h4 id="update-on-the-git-cbur-side">update on the git cbur side.<a class="headerlink" href="#update-on-the-git-cbur-side" title="Permanent link">&para;</a></h4>
<ol>
<li>get the backup of cbur repo values file. and update the ssh:credentialName </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdcbur01</span><span class="w"> </span><span class="o">&gt;</span><span class="w">  </span><span class="n">rr</span><span class="p">.</span><span class="n">yaml</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>

<span class="nl">SSH</span><span class="p">:</span>
<span class="w">  </span><span class="nl">credentialName</span><span class="p">:</span><span class="w"> </span><span class="n">bastionhostpan</span>

<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdcbur01</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ncd</span><span class="o">/</span><span class="n">NCD_24</span><span class="mf">.9</span><span class="n">_Git_Server_ORB</span><span class="o">-</span><span class="n">RC</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">product</span><span class="o">/</span><span class="n">helmcharts</span><span class="o">/</span><span class="n">cbur</span><span class="o">-</span><span class="mf">1.18.1</span><span class="p">.</span><span class="n">tgz</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">yaml</span><span class="w"> </span><span class="c1">--debug</span>
</code></pre></div>

<ol>
<li>Similar to git cbur modification, need to update the git=server chart as well. </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">yaml</span>
<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>

<span class="k">update</span><span class="err">:</span>

<span class="nl">cbur</span><span class="p">:</span>
<span class="w">  </span><span class="nl">brPolicy</span><span class="p">:</span>
<span class="w">    </span><span class="nl">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="n">cbur</span><span class="p">.</span><span class="n">csf</span><span class="p">.</span><span class="n">nokia</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">v1</span>
<span class="w">    </span><span class="nl">spec</span><span class="p">:</span>
<span class="w">      </span><span class="nl">autoEnableCron</span><span class="p">:</span><span class="w"> </span><span class="k">false</span>
<span class="w">      </span><span class="nl">autoUpdateCron</span><span class="p">:</span><span class="w"> </span><span class="k">false</span>
<span class="w">      </span><span class="nl">backend</span><span class="p">:</span>
<span class="w">        </span><span class="nl">mode</span><span class="p">:</span><span class="w"> </span><span class="n">sftp</span>
<span class="w">      </span><span class="nl">cronSpec</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="o">*</span>
<span class="w">      </span><span class="nl">dataEncryption</span><span class="p">:</span>
<span class="w">        </span><span class="nl">enable</span><span class="p">:</span><span class="w"> </span><span class="k">false</span>
<span class="w">      </span><span class="nl">ignoreFileChanged</span><span class="p">:</span><span class="w"> </span><span class="k">false</span>
<span class="w">      </span><span class="nl">maxiCopy</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="w">      </span><span class="nl">weight</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span>

<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w">  </span><span class="n">helm</span><span class="w"> </span><span class="n">upgrade</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">ncd</span><span class="o">/</span><span class="n">NCD_24</span><span class="mf">.9</span><span class="n">_Git_Server_ORB</span><span class="o">-</span><span class="n">RC</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">product</span><span class="o">/</span><span class="n">helmcharts</span><span class="o">/</span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="mf">24.9.1</span><span class="o">-</span><span class="mf">7.</span><span class="n">g30f1acf</span><span class="p">.</span><span class="n">tgz</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">yaml</span><span class="w"> </span><span class="c1">--debug --timeout 20m</span>
</code></pre></div>

<ol>
<li>validate there is no pods are in pending or crashloop error here .</li>
</ol>
<h4 id="trigger-the-backup-on-remote-desination">Trigger the backup on remote desination<a class="headerlink" href="#trigger-the-backup-on-remote-desination" title="Permanent link">&para;</a></h4>
<ol>
<li>using follow method to trigger  the backup </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="k">backup</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">paclypancdgit01</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="k">none</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">cbur</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">panclyphub01</span><span class="p">.</span><span class="n">mnc020</span><span class="p">.</span><span class="n">mcc714</span><span class="o">/</span><span class="n">cbur</span><span class="w"> </span><span class="c1">--backend sftp --verbose</span>

<span class="o">[</span><span class="n">root@ncputility ~ panhub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<ol>
<li>login to that SFTP server and check for backup files.</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="p">[</span><span class="n">gitserverbackup</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="mi">20250402134019</span><span class="n">_SFTP_paclypancdgit01_ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">pwd</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gitserverbackup</span><span class="o">/</span><span class="n">BACKUP</span><span class="o">/</span><span class="n">sftp</span><span class="o">/</span><span class="n">paclypancdgit01</span><span class="o">/</span><span class="n">DEPLOYMENT_ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="o">/</span><span class="mi">20250402134019</span><span class="n">_SFTP_paclypancdgit01_ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span>
<span class="p">[</span><span class="n">gitserverbackup</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="mi">20250402134019</span><span class="n">_SFTP_paclypancdgit01_ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="p">]</span><span class="o">$</span><span class="w"> </span><span class="n">ll</span>
<span class="n">total</span><span class="w"> </span><span class="mi">2476</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">gitserverbackup</span><span class="w"> </span><span class="n">gitserverbackup</span><span class="w">    </span><span class="mi">7846</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="mi">08</span><span class="p">:</span><span class="mi">40</span><span class="w"> </span><span class="mi">20250402134019</span><span class="n">_SFTP_paclypancdgit01_ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox_Secrets</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--.</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">gitserverbackup</span><span class="w"> </span><span class="n">gitserverbackup</span><span class="w"> </span><span class="mi">2523279</span><span class="w"> </span><span class="n">Apr</span><span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="mi">08</span><span class="p">:</span><span class="mi">41</span><span class="w"> </span><span class="mi">20250402134019</span><span class="n">_SFTP_paclypancdgit01_ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox_volume</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
<span class="p">[</span><span class="n">gitserverbackup</span><span class="err">@</span><span class="n">ncputility</span><span class="w"> </span><span class="mi">20250402134019</span><span class="n">_SFTP_paclypancdgit01_ncd</span><span class="o">-</span><span class="n">git</span><span class="o">-</span><span class="n">toolbox</span><span class="p">]</span><span class="o">$</span>
</code></pre></div>

<h4 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h4>
<h5 id="certificate-error">Certificate error<a class="headerlink" href="#certificate-error" title="Permanent link">&para;</a></h5>
<ol>
<li>copy crt file used during installation.</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility denmark</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="o">-</span><span class="n">rp</span><span class="w"> </span><span class="n">ca</span><span class="p">.</span><span class="n">crt</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">pki</span><span class="o">/</span><span class="n">ca</span><span class="o">-</span><span class="n">trust</span><span class="o">/</span><span class="n">source</span><span class="o">/</span><span class="n">anchors</span><span class="o">/</span>
<span class="o">[</span><span class="n">root@ncputility denmark</span><span class="o">]</span><span class="err">#</span><span class="w"> </span><span class="n">sudo</span><span class="w"> </span><span class="k">update</span><span class="o">-</span><span class="n">ca</span><span class="o">-</span><span class="n">trust</span>
<span class="o">[</span><span class="n">root@ncputility denmark</span><span class="o">]</span><span class="err">#</span>
</code></pre></div>

<h5 id="backup-job-failure">backup job failure<a class="headerlink" href="#backup-job-failure" title="Permanent link">&para;</a></h5>
<ol>
<li>if Error looks like this, then problem on the namespace spoce. </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ hn_hub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="k">backup</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">hnevocdgit01</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="k">none</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">cbur</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">hnevocphub01</span><span class="p">.</span><span class="n">mnc002</span><span class="p">.</span><span class="n">mcc708</span><span class="o">/</span><span class="n">cbur</span>
<span class="err">{</span>
<span class="w">  </span><span class="ss">&quot;kind&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Status&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;apiVersion&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;v1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;metadata&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{}</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;status&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Failure&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;message&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Failed to get helm release ncd-git in namespace hnevocdgit01&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;reason&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;details&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{}</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;code&quot;</span><span class="err">:</span><span class="w"> </span><span class="mi">500</span>
<span class="err">}</span>
<span class="o">[</span><span class="n">root@ncputility ~ hn_hub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span>
</code></pre></div>

<ol>
<li>to resolve this issue, get the values file and update the namespace scope list.  include git-server namespace too. </li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ hn_hub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">cbur</span><span class="w">  </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">hnevocdcbur01</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">rr</span><span class="p">.</span><span class="n">yaml</span>
</code></pre></div>

<ol>
<li>retry it, it will work now</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">root@ncputility ~ hn_hub_rc</span><span class="o">]</span><span class="err">$</span><span class="w"> </span><span class="n">helm</span><span class="w"> </span><span class="k">backup</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="n">hnevocdgit01</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="w"> </span><span class="k">none</span><span class="w"> </span><span class="o">-</span><span class="n">t</span><span class="w"> </span><span class="n">ncd</span><span class="o">-</span><span class="n">git</span><span class="w"> </span><span class="o">-</span><span class="n">x</span><span class="w"> </span><span class="nl">http</span><span class="p">:</span><span class="o">//</span><span class="n">cbur</span><span class="p">.</span><span class="n">apps</span><span class="p">.</span><span class="n">hnevocphub01</span><span class="p">.</span><span class="n">mnc002</span><span class="p">.</span><span class="n">mcc708</span><span class="o">/</span><span class="n">cbur</span>
<span class="err">{</span>
<span class="w">  </span><span class="ss">&quot;kind&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Status&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;apiVersion&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;v1&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;metadata&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{}</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;status&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Success&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;message&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;backupHelmRelease task = cc857932-d83d-4e2d-9493-1252595da3f2 is on!&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;reason&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;details&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">    </span><span class="ss">&quot;cc857932-d83d-4e2d-9493-1252595da3f2&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{</span>
<span class="w">      </span><span class="ss">&quot;name&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;ncd-git&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;namespace&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;hnevocdgit01&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;timestamp&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;20250403005800&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;backup_data&quot;</span><span class="err">:</span><span class="w"> </span><span class="err">{}</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;helm_version&quot;</span><span class="err">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span>
<span class="w">      </span><span class="ss">&quot;request&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;backupHelmRelease&quot;</span>
<span class="w">    </span><span class="err">}</span>
<span class="w">  </span><span class="err">}</span><span class="p">,</span>
<span class="w">  </span><span class="ss">&quot;code&quot;</span><span class="err">:</span><span class="w"> </span><span class="mi">202</span>
<span class="err">}</span>
<span class="o">[</span><span class="n">root@ncputility ~ hn_hub_rc</span><span class="o">]</span><span class="err">$</span>
</code></pre></div>

<h4 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h4>
<ol>
<li>NCDFM tickets</li>
<li>https://jiradc2.ext.net.nokia.com/browse/NCDFM-3023</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../js/auth.js"></script>
      
    
  </body>
</html>